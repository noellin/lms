(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-79f5d133"],{3258:function(t,e,s){"use strict";s.r(e);var i=s("1157"),a=s.n(i),r=s("3f5b"),o=s("5a0c"),c=s.n(o),n=s("58ba"),d=s("5d67"),l=(s("b349"),s("2ef0")),u=s.n(l),m={name:"Course",components:{CustomHeader:()=>Promise.resolve().then(s.bind(null,"339c")),Select2:r.a,AddStudent:()=>Promise.resolve().then(s.bind(null,"b349"))},mounted(){},data:()=>({showTable:"active",courseName:"",userInfo:{name:"Amanda",email:"support@authenticgoods.co"},teacherList:[{userid:"*",username:"All"}],selectTeacherList:[],tempCourse:{id:[],course_name:""},tempTeacherList:[],tempCourseid:"",selectedTeacher:"*",course:{activeCourseList:[],expiredCourseList:[],coursePagination:{total_pages:1,current_page:1,has_pre:!1,has_next:!1}},courseid:"",sortActiveStatus:!1,tempActiveSortItem:"",sortExpiredStatus:!1,tempExpiredSortItem:""}),created(){"admin"===this.permit?this.selectedTeacher="*":this.selectedTeacher=this.userid,this.init()},mounted(){},computed:{filterTeacherList(){return this.teacherList.map(t=>({id:t.userid,text:t.username}))},userid(){return this.$store.state.auth.userid},permit(){return this.$store.state.auth.permit},todayTimestamp(){return this.$store.state.auth.todayTimestamp},isLoading(){return this.$store.state.common.isLoading}},methods:{saveLog(t){d.e.get(t).then(t=>{console.log(t)}).catch(t=>{})},openEdit(){this.$refs.editcourseForm.validate().then(t=>{t&&(a()("#editModal").modal("hide"),a()("#editChangeModal").modal("show"))})},sortActiveTable(t){(""===this.tempActiveSortItem||this.tempActiveSortItem!==t)&&(this.tempActiveSortItem=t,this.sortActiveStatus=!1),this.sortActiveStatus=!this.sortActiveStatus,this.sortActiveStatus?this.course.activeCourseList=u.a.sortBy(this.course.activeCourseList,[t],["asc"]):this.course.activeCourseList=this.course.activeCourseList.reverse()},sortExpiredTable(t){(""===this.tempExpiredSortItem||this.tempExpiredSortItem!==t)&&(this.tempExpiredSortItem=t,this.sortExpiredStatus=!1),this.sortExpiredStatus=!this.sortExpiredStatus,this.sortExpiredStatus?this.course.expiredCourseList=u.a.sortBy(this.course.expiredCourseList,[t],["asc"]):this.course.expiredCourseList=this.course.expiredCourseList.reverse()},init(){console.log(this.userid),this.$store.dispatch("common/setLoading",!0),this.axios.all([this.getActiveCourseList(this.selectedTeacher),this.getExpiredCourseList(this.selectedTeacher),this.getTeacherList(),this.saveLog(this.userid)]).then(t=>{setTimeout(()=>{this.$store.dispatch("common/setLoading",!1)},400)})},resetStdTemp(){this.$refs.addstudent.resetStdTemp()},getTeacherList(){n.d.get().then(t=>{"admin"===this.permit?(t.record.forEach(t=>{this.teacherList.push(t)}),this.selectTeacherList=t.record.map(t=>({id:t.userid,text:t.username}))):(this.teacherList=[],this.teacherList=t.record,this.selectTeacherList=t.record.map(t=>({id:t.userid,text:t.username})))})},getActiveCourseList(t=""){let e="";"*"!==t&&(e=t),n.a.get(this.permit,this.userid,e).then(t=>{this.course.activeCourseList=t.record,this.course.activeCourseList.forEach(t=>{t.expiry=c.a.unix(t.expiry_date).add(1,"month").isBefore(c.a.unix(this.todayTimestamp))})})},getExpiredCourseList(t=""){let e="";"*"!==t&&(e=t),n.c.get(this.permit,this.userid,e).then(t=>{this.course.expiredCourseList=t.record})},searchCourse(t){this.$store.dispatch("common/setLoading",!0),this.course.expiredCourseList=[],this.course.activeCourseList=[];let e={keyword:t};n.e.post(this.userid,e).then(t=>{t.record.forEach(t=>{"active"===t.status?this.course.activeCourseList.push(t):this.course.expiredCourseList.push(t)}),setTimeout(()=>{this.$store.dispatch("common/setLoading",!1)},400)})},setTempCourse(t,e,s,i){this.tempCourse.id=""===t?[]:t.split(";"),this.tempTeacherList=""===e?[]:e.split(","),this.tempCourse.course_name=s,this.tempCourseid=i},async setCourse(t){t.userID=t.id.join(";");"success"===(await n.f.put(this.tempCourseid,t).then(t=>t)).status&&this.getActiveCourseList(this.selectedTeacher)},myChangeEvent(t){},mySelectEvent({id:t,text:e}){let s=this.tempTeacherList.indexOf(e);-1===s?this.tempTeacherList.push(e):this.tempTeacherList.splice(s,1)},gotoCourseMaterial(t,e){this.$router.push({path:`/course_material/course=${t}/type=Material/${e}`})},gotoCourseAssignment(t,e){this.$router.push({path:`/course_assignment/course=${t}/type=Assignment/${e}`})}}},h=(s("7881"),s("2877")),p=Object(h.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app3"}},[s("div",{staticClass:"content-wrapper"},[s("custom-header"),s("div",{staticClass:"content"},[s("header",{staticClass:"page-header"},[s("div",{staticClass:"d-flex align-items-start"},[s("div",{staticClass:"mr-auto"},[s("h1",[t._v(t._s(t.$t("home")))])])])]),s("section",{staticClass:"page-content container-fluid"},[s("div",{staticClass:"row pb-3"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group form-rounded mb-0 mr-3"},[s("select2",{attrs:{multiple:"",options:t.filterTeacherList,disabled:"teacher"===t.permit},on:{change:function(e){t.getActiveCourseList(t.selectedTeacher),t.getExpiredCourseList(t.selectedTeacher)}},model:{value:t.selectedTeacher,callback:function(e){t.selectedTeacher=e},expression:"selectedTeacher"}})],1),s("div",{staticClass:"form-group form-rounded mb-0"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.courseName,expression:"courseName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search..."},domProps:{value:t.courseName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchCourse(t.courseName)},input:function(e){e.target.composing||(t.courseName=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("div",{staticClass:"btn btn-secondary btn-outline btn-icon btn-rounded",attrs:{type:"button"},on:{click:function(e){return t.searchCourse(t.courseName)}}},[s("i",{staticClass:"zmdi zmdi-search text-secondary"})])])])])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("ul",{staticClass:"nav nav-tabs"},[s("li",{staticClass:"nav-item",attrs:{role:"presentation"},on:{click:function(e){t.showTable="active"}}},[s("a",{staticClass:"nav-link active show",attrs:{href:"#tab-1","data-toggle":"tab","aria-expanded":"true"}},[t._v(t._s(t.$t("active")))])]),s("li",{staticClass:"nav-item",attrs:{role:"presentation"},on:{click:function(e){t.showTable="expired"}}},[s("a",{staticClass:"nav-link",attrs:{href:"#tab-2","data-toggle":"tab","aria-expanded":"true"}},[t._v(t._s(t.$t("expired")))])])]),s("div",{staticClass:"tab-content"},[s("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":!1,color:"#32C1DB",width:100,height:100},on:{"update:active":function(e){t.isLoading=e}}}),"active"===t.showTable?s("div",{staticClass:"tab-pane fadeIn active",attrs:{id:"tab-1"}},[s("table",{staticClass:"table table-striped",staticStyle:{width:"100%"}},[s("thead",[s("tr",[s("th",{staticClass:"pointer",staticStyle:{width:"15%"},on:{click:function(e){return t.sortActiveTable("course_name")}}},[t._v(" "+t._s(t.$t("classes"))),s("i",{staticClass:"zmdi zmdi-swap-vertical ml-1 zmdi-hc-lg"})]),s("th",{staticStyle:{width:"15%"}},[t._v(t._s(t.$t("teachers")))]),s("th",{staticStyle:{width:"15%"}},[t._v(" "+t._s(t.$t("available-seats"))+" ")]),s("th",{staticStyle:{width:"15%"}},[t._v(t._s(t.$t("library")))]),s("th",{staticStyle:{width:"15%"}},[t._v(t._s(t.$t("expiry-date")))]),s("th",{staticStyle:{width:"15%"}},[t._v(" "+t._s(t.$t("view-assignments"))+" ")]),"admin"===t.permit?s("th",{staticStyle:{"text-align":"center",width:"10%"}},[t._v(" "+t._s(t.$t("action"))+" ")]):t._e()])]),s("tbody",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}]},t._l(t.course.activeCourseList,(function(e){return s("tr",{key:e.courseid},[s("td",[s("a",{staticClass:"text-link pointer",on:{click:function(s){return t.gotoCourseMaterial(e.course_name,e.courseid)}}},[t._v(t._s(e.course_name))])]),s("td",[s("span",[t._v(" "+t._s(e.username))])]),s("td",[s("span",{staticClass:"tdwidth-sm text-right"},[t._v(t._s(e.noOfStu)+"ï¼"+t._s(e.quota))]),s("button",{staticClass:"btn btn-primary btn-rounded btn-sm ml-2",attrs:{type:"","data-toggle":"modal","data-target":"#AddStudentModal"},on:{click:function(s){t.resetStdTemp(),t.courseid=e.courseid}}},[t._v(" "+t._s(t.$t("add-student"))+" ")])]),s("td",[t._v(t._s(e.pkg_name))]),s("td",[s("span",{class:{"text-danger":!0===e.expiry}},[t._v(t._s(t._f("dateConversion")(e.expiry_date)))]),e.expiry?s("span",{staticClass:"badge badge-pill badge-secondary"},[t._v(t._s(t.$t("expiring")))]):t._e()]),s("td",[s("button",{staticClass:"btn btn-primary btn-rounded btn-sm",attrs:{disabled:""===e.username},on:{click:function(s){return t.gotoCourseAssignment(e.course_name,e.courseid)}}},[t._v(" "+t._s(t.$t("view"))+" ")])]),"admin"===t.permit?s("td",{staticStyle:{"text-align":"center"}},[s("button",{staticClass:"btn btn-nostyle",attrs:{"data-toggle":"modal","data-target":"#editModal"},on:{click:function(s){return t.setTempCourse(e.userid,e.username,e.course_name,e.courseid)}}},[s("i",{staticClass:"la la-edit"})])]):t._e()])})),0)]),s("div",{staticClass:"col-12"})]):t._e(),"expired"===t.showTable?s("div",{staticClass:"tab-pane fadeIn",attrs:{id:"tab-2"}},[s("table",{staticClass:"table table-striped",staticStyle:{width:"100%"}},[s("thead",[s("tr",[s("th",{staticClass:"pointer",on:{click:function(e){return t.sortExpiredTable("course_name")}}},[t._v(" "+t._s(t.$t("course-name"))),s("i",{staticClass:"zmdi zmdi-swap-vertical ml-1 zmdi-hc-lg"})]),s("th",[t._v(t._s(t.$t("teacher")))]),s("th",[t._v(t._s(t.$t("active-student-limit")))]),s("th",[t._v(t._s(t.$t("package")))]),s("th",[t._v(t._s(t.$t("expiry-date")))])])]),s("tbody",t._l(t.course.expiredCourseList,(function(e){return s("tr",{key:e.courseid},[s("td",[t._v(t._s(e.course_name))]),s("td",[t._v(t._s(e.username))]),s("td",[t._v(" "+t._s(e.noOfStu)+"/"+t._s(e.quota)+" ")]),s("td",[t._v(t._s(e.pkg_name))]),s("td",[t._v(" "+t._s(t._f("dateConversion")(e.expiry_date))+" ")])])})),0)])]):t._e()],1)])])])])])])],1),s("div",{staticClass:"modal fade",attrs:{id:"editModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered modal-md",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("edit")))]),t._m(0)]),s("div",{staticClass:"modal-body"},[s("form",[s("ValidationObserver",{ref:"editcourseForm"},[s("ValidationProvider",{attrs:{rules:"required",name:"course name"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.failed,a=e.errors;return[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"control-label text-right col-sm-4 text-height-form-control"},[t._v(t._s(t.$t("course-name")))]),s("div",{staticClass:"col-sm-8"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCourse.course_name,expression:"tempCourse.course_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Course Name"},domProps:{value:t.tempCourse.course_name},on:{input:function(e){e.target.composing||t.$set(t.tempCourse,"course_name",e.target.value)}}}),i?s("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))]):t._e()])])]}}])})],1),s("div",{staticClass:"form-group row",style:{height:16.5*[parseInt(t.tempCourse.id.length)+2]+"px"}},[s("label",{staticClass:"control-label text-right col-sm-4 text-height-form-control"},[t._v(t._s(t.$t("select-teacher")))]),s("div",{staticClass:"col-sm-8"},[s("select2",{attrs:{multiple:"",options:t.selectTeacherList,settings:{multiple:!0}},on:{change:function(e){return t.myChangeEvent(e)},select:function(e){return t.mySelectEvent(e)}},model:{value:t.tempCourse.id,callback:function(e){t.$set(t.tempCourse,"id",e)},expression:"tempCourse.id"}})],1)])],1)]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("close"))+" ")]),s("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button"},on:{click:function(e){return t.openEdit()}}},[t._v(" "+t._s(t.$t("save-changes"))+" ")])])])])]),s("div",{staticClass:"modal fade",attrs:{id:"editChangeModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("edit")))]),t._m(1)]),s("div",{staticClass:"modal-body"},[s("p",[t._v(" "+t._s(t.$t("confirm-to-change-the-teacher-to"))+" "),t._l(t.tempTeacherList,(function(e,i){return s("span",{key:e},[t._v(" "+t._s(e)+" "),i+1!==t.tempTeacherList.length?s("span",[t._v(",")]):t._e()])}))],2)]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary btn-rounded btn-outline",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),s("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.setCourse(t.tempCourse)}}},[t._v(" "+t._s(t.$t("confirm"))+" ")])])])])]),s("add-student",{ref:"addstudent",attrs:{id:"courseListdrop",courseid:t.courseid},on:{childemit:function(e){return t.init()}}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])}],!1,null,"59395b90",null);e.default=p.exports},"5d67":function(t,e,s){"use strict";s.d(e,"d",(function(){return a})),s.d(e,"c",(function(){return r})),s.d(e,"b",(function(){return o})),s.d(e,"a",(function(){return c})),s.d(e,"e",(function(){return n}));var i=s("a95a");const a={post:t=>Object(i.c)("/info/login",t)},r={get:t=>Object(i.b)("/info/forgotpw/"+t)},o={post:(t,e)=>Object(i.c)("/info/confirmpw/"+t,e)},c={get:t=>Object(i.b)("/info/activate/"+t)},n={get:t=>Object(i.b)("/stu/log/setlogin/"+t)}},7881:function(t,e,s){"use strict";var i=s("ab5c");s.n(i).a},ab5c:function(t,e,s){}}]);
//# sourceMappingURL=chunk-79f5d133.7ead9e00.js.map