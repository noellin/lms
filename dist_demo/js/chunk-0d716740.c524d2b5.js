(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0d716740"],{"25f7":function(t,s,e){"use strict";e.r(s);var a=e("2755"),i=(e("3f5b"),e("1157")),o=e.n(i),l={name:"CollectionDetail",components:{CustomHeader:()=>Promise.resolve().then(e.bind(null,"339c")),SearchGroup:e("b712").a},data:()=>({cname:"",cResourceList:[],typeList:[{text:"All type",id:"all"},{text:"Picture Book",id:"book"},{text:"Video",id:"video"}],selectType:"all",courseList:[],searchRname:"",lastPlayList:[],tempNote:"book"}),created(){},watch:{},mounted(){this.cname=this.$route.params.cname,this.getCollectionContent()},computed:{userid(){return this.$store.state.auth.userid},materialSort(){let t=[...this.cResourceList];return t.forEach(t=>{void 0===t.unit&&(t.unit="")}),t}},methods:{getMColList(t){console.log(t),this.cResourceList=[...t]},showLastPlay(t){this.lastPlayList=[],this.lastPlayList=t,o()("#lastPlayModal").modal("show")},searchCollectionResource(){let t=this.selectType,s=this.searchRname;"all"===this.selectType&&(t="*"),""===this.searchRname&&(s="*"),a.k.get(this.userid,this.$route.params.cid,s,t).then(t=>{t.record.forEach(t=>{t.lastplay=[],t.last_access_all.forEach(s=>{"0"!==s.last_access&&t.lastplay.push(s)})}),t.record.forEach(t=>{}),this.cResourceList=t.record}).catch(t=>{})},getCollectionContent(){console.log(this.userid,this.$route.params.cid),a.e.get(this.userid,this.$route.params.cid).then(t=>{t.record.forEach(t=>{t.lastplay=[],t.last_access_all.forEach(s=>{"0"!==s.last_access&&t.lastplay.push(s)})}),console.log(t.record),this.cResourceList=t.record}).catch(t=>{})},gotoCollectionEdit(){this.$router.push({path:`/collection/edit/${this.$route.params.pid}/${this.$route.params.cname}/${this.$route.params.cid}`})},gotoCourse(t){console.log(t),"book"===this.tempNote?window.open(`/bktchr/?pkgid=${t.pkgid}&colid=${t.colid}&resid=${t.resourceid}&mid=&lmsd=demo&auth=${this.$store.state.auth.token}&crsid=${t.courseid}&userid=${this.userid}`):window.open(`/vptchr/?pkgid=${t.pkgid}&colid=${t.colid}&resid=${t.resourceid}&mid=&lmsd=demo&auth=${this.$store.state.auth.token}&crsid=${t.courseid}&userid=${this.userid}`)},getAvailableCourse(t){console.log(this.userid,this.$route.params.cid,t),a.c.get(this.userid,this.$route.params.cid,t).then(t=>{this.courseList=t.record,console.log(t.record)}).catch(t=>{})}}},r=(e("5b90"),e("2877")),c=Object(r.a)(l,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app3"}},[e("div",{staticClass:"content-wrapper"},[e("custom-header"),e("div",{staticClass:"content"},[e("header",{staticClass:"page-header"},[e("div",{staticClass:"d-flex align-items-start"},[e("div",{staticClass:"mt-2 mr-3"},[e("a",{staticClass:"btn-rounded-icon btn-primary ml-2 pointer",on:{click:t.$back}},[e("i",{staticClass:"zmdi zmdi-arrow-left zmdi-hc-fw text-white"})])]),e("div",{staticClass:"mr-auto"},[e("h1",[t._v(t._s(t.$t("collection")))]),e("p",{staticClass:"second-title"},[t._v(t._s(t.cname))])])])]),e("section",{staticClass:"page-content container-fluid"},[e("div",{staticClass:"d-flex justify-content-between"},[e("search-group",{attrs:{mfilter:"",page:"collection"},on:{getMColList:t.getMColList}}),e("div",{staticClass:"text-right"},[e("a",{staticClass:"btn btn-primary btn-rounded btn-outline",on:{click:function(s){return t.gotoCollectionEdit()}}},[e("i",{staticClass:"la la-edit"}),t._v(t._s(t.$t("edit")))])])],1),e("div",{staticClass:"row"},t._l(t.cResourceList,(function(s,a){return e("div",{key:s.resourceid+a,staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media"},[e("div",{staticClass:"align-self-center overlay-wrap mr-4 w-150 h-150 border"},[e("span",{staticClass:"overlay-icon"},["video"===s.note?e("i",{staticClass:"fas fa-video"}):e("i",{staticClass:"fas fa-book-open"})]),e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://lms.mangosteems.com/cms/resdl/cover/"+s.resourceid,expression:"\n                        'https://lms.mangosteems.com/cms/resdl/cover/' +\n                        cr.resourceid\n                      "}],staticClass:"overlay-img cus-img",attrs:{alt:"course image"}})]),e("div",{staticClass:"media-body"},[e("div",{staticClass:"d-flex justify-content-between"},[e("div",[""!==s.level&&void 0!==s.level&&null!==s.level?e("span",{staticClass:"badge badge-pill badge-secondary"},[t._v(t._s(t.$t("level"))+" "+t._s(s.level))]):t._e(),""!==s.unit&&void 0!==s.unit?e("span",{staticClass:"badge badge-pill badge-secondary ml-2"},[t._v(t._s(t.$t("unit"))+" "+t._s(s.unit))]):t._e(),e("h4",{staticClass:"mb-0 mt-3 d-flex align-self-center text-primary"},[e("div",{attrs:{title:""}},[t._v(" "+t._s(s.resource_name)+" ")])]),e("p",{directives:[{name:"show",rawName:"v-show",value:0!==s.lastplay.length,expression:"cr.lastplay.length !== 0"}],staticClass:"text-muted mt-1"},[e("i",{staticClass:"zmdi zmdi-notifications mr-1"}),e("small",{staticClass:"fw300 pointer",on:{click:function(e){return t.showLastPlay(s.lastplay)}}},[t._v(t._s(t.$t("last-played"))+" ")])])]),e("div",{staticClass:"text-primary pointer",attrs:{"data-toggle":"modal","data-target":"#StartModal"},on:{click:function(e){t.getAvailableCourse(s.resourceid),t.tempNote=s.note}}},[t._v(" "+t._s(t.$t("start"))),t._m(0,!0)])])])])])])])})),0)])])],1),e("div",{staticClass:"modal fade",attrs:{id:"lastPlayModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[0!==t.lastPlayList.length?e("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("last-play-record-course-date"))+" ")]):e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("no-record")))]),t._m(1)]),0!==t.lastPlayList.length?e("div",{staticClass:"modal-body pb-4"},t._l(t.lastPlayList,(function(s){return e("div",{key:s.courseid+"lastplay"},[e("span",[t._v(t._s(s.course_name)+" ï¼š "+t._s(t._f("dateConversion")(s.last_access)))])])})),0):e("div",{staticClass:"modal-body pb-4"},[e("p",[t._v(t._s(t.$t("no-open-or-play-record"))+".")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"StartModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[0!==t.courseList.length?e("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("start"))+" ")]):e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("no-course")))]),t._m(2)]),0!==t.courseList.length?e("div",{staticClass:"modal-body pb-4"},[e("h5",[t._v(t._s(t.$t("what-is-your-ongoing-course"))+"?")]),e("p",[t._v(" "+t._s(t.$t("this-material-can-only-be-viewed-in-the-following-course"))+". ")]),t._l(t.courseList,(function(s){return e("a",{key:s.resourceid,staticClass:"btn btn-primary btn-outline btn-rounded mr-3 mb-3",attrs:{title:"","data-dismiss":"modal"},on:{click:function(e){return t.gotoCourse(s)}}},[t._v(t._s(s.course_name))])}))],2):e("div",{staticClass:"modal-body pb-4"},[e("p",[t._v(" "+t._s(t.$t("the-course-you-can-use-this-collection-has-expired-if-you-wish-to-continue-using-it-you-must-renew-your-contract"))+". ")])])])])])])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("a",{staticClass:"btn-rounded-icon btn-primary rounded ml-2"},[s("i",{staticClass:"zmdi zmdi-arrow-right zmdi-hc-fw text-white"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])}],!1,null,"3aa3ce38",null);s.default=c.exports},"5b90":function(t,s,e){"use strict";var a=e("f5aa");e.n(a).a},f5aa:function(t,s,e){}}]);
//# sourceMappingURL=chunk-0d716740.c524d2b5.js.map