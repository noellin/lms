{"version":3,"sources":["webpack:///./src/views/CollectionDetail.vue?1b9f","webpack:///./src/views/CollectionDetail.vue?2855","webpack:///src/views/CollectionDetail.vue","webpack:///./src/views/CollectionDetail.vue","webpack:///./src/views/CollectionDetail.vue?91b8"],"names":["name","components","CustomHeader","SearchGroup","data","cname","cResourceList","typeList","text","id","selectType","courseList","searchRname","lastPlayList","tempNote","watch","this","$route","params","getCollectionContent","computed","$store","state","auth","userid","temp","forEach","item","undefined","unit","methods","textbookList","console","log","lp","modal","type","keyword","get","cid","then","response","record","element","lastplay","last_access_all","last_access","push","catch","err","$router","path","pid","course","window","open","pkgid","colid","resourceid","token","courseid","rid","component","_vm","_h","$createElement","_c","_self","attrs","staticClass","on","$back","_v","_s","$t","getMColList","$event","gotoCollectionEdit","_l","cr","index","key","note","directives","rawName","value","expression","level","_e","resource_name","length","showLastPlay","getAvailableCourse","_m","course_name","_f","gotoCourse"],"mappings":"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","file":"js/chunk-0d716740.9742ecf1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app3\"}},[_c('div',{staticClass:\"content-wrapper\"},[_c('custom-header'),_c('div',{staticClass:\"content\"},[_c('header',{staticClass:\"page-header\"},[_c('div',{staticClass:\"d-flex align-items-start\"},[_c('div',{staticClass:\"mt-2 mr-3\"},[_c('a',{staticClass:\"btn-rounded-icon btn-primary ml-2 pointer\",on:{\"click\":_vm.$back}},[_c('i',{staticClass:\"zmdi zmdi-arrow-left zmdi-hc-fw text-white\"})])]),_c('div',{staticClass:\"mr-auto\"},[_c('h1',[_vm._v(_vm._s(_vm.$t(\"collection\")))]),_c('p',{staticClass:\"second-title\"},[_vm._v(_vm._s(_vm.cname))])])])]),_c('section',{staticClass:\"page-content container-fluid\"},[_c('div',{staticClass:\"d-flex justify-content-between\"},[_c('search-group',{attrs:{\"mfilter\":'',\"page\":'collection'},on:{\"getMColList\":_vm.getMColList}}),_c('div',{staticClass:\"text-right\"},[_c('a',{staticClass:\"btn btn-primary btn-rounded btn-outline\",on:{\"click\":function($event){return _vm.gotoCollectionEdit()}}},[_c('i',{staticClass:\"la la-edit\"}),_vm._v(_vm._s(_vm.$t(\"edit\")))])])],1),_c('div',{staticClass:\"row\"},_vm._l((_vm.cResourceList),function(cr,index){return _c('div',{key:cr.resourceid + index,staticClass:\"col-12\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"align-self-center overlay-wrap mr-4 w-150 h-150 border\"},[_c('span',{staticClass:\"overlay-icon\"},[(cr.note === 'video')?_c('i',{staticClass:\"fas fa-video\"}):_c('i',{staticClass:\"fas fa-book-open\"})]),_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(\n                        'https://lms.mangosteems.com/cms/resdl/cover/' +\n                        cr.resourceid\n                      ),expression:\"\\n                        'https://lms.mangosteems.com/cms/resdl/cover/' +\\n                        cr.resourceid\\n                      \"}],staticClass:\"overlay-img cus-img\",attrs:{\"alt\":\"course image\"}})]),_c('div',{staticClass:\"media-body\"},[_c('div',{staticClass:\"d-flex justify-content-between\"},[_c('div',[(\n                            cr.level !== '' &&\n                            cr.level !== undefined &&\n                            cr.level !== null\n                          )?_c('span',{staticClass:\"badge badge-pill badge-secondary\"},[_vm._v(_vm._s(_vm.$t(\"level\"))+\" \"+_vm._s(cr.level))]):_vm._e(),(cr.unit !== '' && cr.unit !== undefined)?_c('span',{staticClass:\"badge badge-pill badge-secondary ml-2\"},[_vm._v(_vm._s(_vm.$t(\"unit\"))+\" \"+_vm._s(cr.unit))]):_vm._e(),_c('h4',{staticClass:\"mb-0 mt-3 d-flex align-self-center text-primary\"},[_c('div',{attrs:{\"title\":\"\"}},[_vm._v(\" \"+_vm._s(cr.resource_name)+\" \")])]),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(cr.lastplay.length !== 0),expression:\"cr.lastplay.length !== 0\"}],staticClass:\"text-muted mt-1\"},[_c('i',{staticClass:\"zmdi zmdi-notifications mr-1\"}),_c('small',{staticClass:\"fw300 pointer\",on:{\"click\":function($event){return _vm.showLastPlay(cr.lastplay)}}},[_vm._v(_vm._s(_vm.$t(\"last-played\"))+\" \")])])]),_c('div',{staticClass:\"text-primary pointer\",attrs:{\"data-toggle\":\"modal\",\"data-target\":\"#StartModal\"},on:{\"click\":function($event){_vm.getAvailableCourse(cr.resourceid);\n                          _vm.tempNote = cr.note;}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"start\"))),_vm._m(0,true)])])])])])])])}),0)])])],1),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"lastPlayModal\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[(_vm.lastPlayList.length !== 0)?_c('h5',{staticClass:\"modal-title\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"last-play-record-course-date\"))+\" \")]):_c('h5',{staticClass:\"modal-title\"},[_vm._v(_vm._s(_vm.$t(\"no-record\")))]),_vm._m(1)]),(_vm.lastPlayList.length !== 0)?_c('div',{staticClass:\"modal-body pb-4\"},_vm._l((_vm.lastPlayList),function(lp){return _c('div',{key:lp.courseid + 'lastplay'},[_c('span',[_vm._v(_vm._s(lp.course_name)+\" ： \"+_vm._s(_vm._f(\"dateConversion\")(lp.last_access)))])])}),0):_c('div',{staticClass:\"modal-body pb-4\"},[_c('p',[_vm._v(_vm._s(_vm.$t(\"no-open-or-play-record\"))+\".\")])])])])]),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"StartModal\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[(_vm.courseList.length !== 0)?_c('h5',{staticClass:\"modal-title\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"start\"))+\" \")]):_c('h5',{staticClass:\"modal-title\"},[_vm._v(_vm._s(_vm.$t(\"no-course\")))]),_vm._m(2)]),(_vm.courseList.length !== 0)?_c('div',{staticClass:\"modal-body pb-4\"},[_c('h5',[_vm._v(_vm._s(_vm.$t(\"what-is-your-ongoing-course\"))+\"?\")]),_c('p',[_vm._v(\" \"+_vm._s(_vm.$t(\"this-material-can-only-be-viewed-in-the-following-course\"))+\". \")]),_vm._l((_vm.courseList),function(course){return _c('a',{key:course.resourceid,staticClass:\"btn btn-primary btn-outline btn-rounded mr-3 mb-3\",attrs:{\"title\":\"\",\"data-dismiss\":\"modal\"},on:{\"click\":function($event){return _vm.gotoCourse(course)}}},[_vm._v(_vm._s(course.course_name))])})],2):_c('div',{staticClass:\"modal-body pb-4\"},[_c('p',[_vm._v(\" \"+_vm._s(_vm.$t( \"the-course-you-can-use-this-collection-has-expired-if-you-wish-to-continue-using-it-you-must-renew-your-contract\" ))+\". \")])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"btn-rounded-icon btn-primary rounded ml-2\"},[_c('i',{staticClass:\"zmdi zmdi-arrow-right zmdi-hc-fw text-white\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{staticClass:\"zmdi zmdi-close\",attrs:{\"aria-hidden\":\"true\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{staticClass:\"zmdi zmdi-close\",attrs:{\"aria-hidden\":\"true\"}})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionDetail.vue?vue&type=script&lang=js&\"","<template>\r\n  <div id=\"app3\">\r\n    <!-- END MENU SIDEBAR WRAPPER -->\r\n    <div class=\"content-wrapper\">\r\n      <!-- TOP TOOLBAR WRAPPER -->\r\n      <custom-header></custom-header>\r\n      <!-- END TOP TOOLBAR WRAPPER -->\r\n      <div class=\"content\">\r\n        <header class=\"page-header\">\r\n          <div class=\"d-flex align-items-start\">\r\n            <div class=\"mt-2 mr-3\">\r\n              <a\r\n                @click=\"$back\"\r\n                class=\"btn-rounded-icon btn-primary ml-2 pointer\"\r\n                ><i class=\"zmdi zmdi-arrow-left zmdi-hc-fw text-white\"></i\r\n              ></a>\r\n            </div>\r\n            <div class=\"mr-auto\">\r\n              <h1>{{ $t(\"collection\") }}</h1>\r\n              <p class=\"second-title\">{{ cname }}</p>\r\n            </div>\r\n          </div>\r\n        </header>\r\n        <section class=\"page-content container-fluid\">\r\n          <div class=\"d-flex justify-content-between\">\r\n            <search-group\r\n              :mfilter=\"''\"\r\n              @getMColList=\"getMColList\"\r\n              :page=\"'collection'\"\r\n            ></search-group>\r\n\r\n            <div class=\"text-right\">\r\n              <a\r\n                @click=\"gotoCollectionEdit()\"\r\n                class=\"btn btn-primary btn-rounded btn-outline\"\r\n                ><i class=\"la la-edit\"></i>{{ $t(\"edit\") }}</a\r\n              >\r\n            </div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div\r\n              class=\"col-12\"\r\n              v-for=\"(cr, index) in cResourceList\"\r\n              :key=\"cr.resourceid + index\"\r\n            >\r\n              <div class=\"card\">\r\n                <div class=\"card-body\">\r\n                  <div class=\"media\">\r\n                    <div\r\n                      class=\"align-self-center overlay-wrap mr-4 w-150 h-150 border\"\r\n                    >\r\n                      <span class=\"overlay-icon\">\r\n                        <i class=\"fas fa-video\" v-if=\"cr.note === 'video'\"></i\r\n                        ><i class=\"fas fa-book-open\" v-else></i>\r\n                      </span>\r\n\r\n                      <img\r\n                        v-lazy=\"\r\n                          'https://lms.mangosteems.com/cms/resdl/cover/' +\r\n                          cr.resourceid\r\n                        \"\r\n                        class=\"overlay-img cus-img\"\r\n                        alt=\"course image\"\r\n                      />\r\n                    </div>\r\n                    <div class=\"media-body\">\r\n                      <div class=\"d-flex justify-content-between\">\r\n                        <div>\r\n                          <span\r\n                            class=\"badge badge-pill badge-secondary\"\r\n                            v-if=\"\r\n                              cr.level !== '' &&\r\n                              cr.level !== undefined &&\r\n                              cr.level !== null\r\n                            \"\r\n                            >{{ $t(\"level\") }} {{ cr.level }}</span\r\n                          >\r\n                          <span\r\n                            class=\"badge badge-pill badge-secondary ml-2\"\r\n                            v-if=\"cr.unit !== '' && cr.unit !== undefined\"\r\n                            >{{ $t(\"unit\") }} {{ cr.unit }}</span\r\n                          >\r\n                          <h4\r\n                            class=\"mb-0 mt-3 d-flex align-self-center text-primary\"\r\n                          >\r\n                            <div title=\"\">\r\n                              <!-- <span\r\n                                v-if=\"cr.unit !== ''\"\r\n                                style=\"font-size: 18px\"\r\n                                >{{ cr.unit }} -\r\n                              </span> -->\r\n                              {{ cr.resource_name }}\r\n                            </div>\r\n                          </h4>\r\n                          <p\r\n                            class=\"text-muted mt-1\"\r\n                            v-show=\"cr.lastplay.length !== 0\"\r\n                          >\r\n                            <i class=\"zmdi zmdi-notifications mr-1\"></i>\r\n                            <small\r\n                              class=\"fw300 pointer\"\r\n                              @click=\"showLastPlay(cr.lastplay)\"\r\n                              >{{ $t(\"last-played\") }}\r\n                              <!-- <span>{{ cr.last_access | dateConversion }}</span> -->\r\n                            </small>\r\n                          </p>\r\n                        </div>\r\n                        <div\r\n                          class=\"text-primary pointer\"\r\n                          @click=\"\r\n                            getAvailableCourse(cr.resourceid);\r\n                            tempNote = cr.note;\r\n                          \"\r\n                          data-toggle=\"modal\"\r\n                          data-target=\"#StartModal\"\r\n                        >\r\n                          {{ $t(\"start\")\r\n                          }}<a class=\"btn-rounded-icon btn-primary rounded ml-2\"\r\n                            ><i\r\n                              class=\"zmdi zmdi-arrow-right zmdi-hc-fw text-white\"\r\n                            ></i\r\n                          ></a>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </div>\r\n    <!-- lastplay MODAL -->\r\n    <div\r\n      class=\"modal fade\"\r\n      id=\"lastPlayModal\"\r\n      tabindex=\"-1\"\r\n      role=\"dialog\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" v-if=\"lastPlayList.length !== 0\">\r\n              {{ $t(\"last-play-record-course-date\") }}\r\n            </h5>\r\n            <h5 class=\"modal-title\" v-else>{{ $t(\"no-record\") }}</h5>\r\n            <button\r\n              type=\"button\"\r\n              class=\"close\"\r\n              data-dismiss=\"modal\"\r\n              aria-label=\"Close\"\r\n            >\r\n              <span aria-hidden=\"true\" class=\"zmdi zmdi-close\"></span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body pb-4\" v-if=\"lastPlayList.length !== 0\">\r\n            <div v-for=\"lp in lastPlayList\" :key=\"lp.courseid + 'lastplay'\">\r\n              <span\r\n                >{{ lp.course_name }} ：\r\n                {{ lp.last_access | dateConversion }}</span\r\n              >\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-body pb-4\" v-else>\r\n            <p>{{ $t(\"no-open-or-play-record\") }}.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- END CONTENT WRAPPER -->\r\n    <!-- old Start MODAL -->\r\n    <div\r\n      class=\"modal fade\"\r\n      id=\"StartModal\"\r\n      tabindex=\"-1\"\r\n      role=\"dialog\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" v-if=\"courseList.length !== 0\">\r\n              {{ $t(\"start\") }}\r\n            </h5>\r\n            <h5 class=\"modal-title\" v-else>{{ $t(\"no-course\") }}</h5>\r\n            <button\r\n              type=\"button\"\r\n              class=\"close\"\r\n              data-dismiss=\"modal\"\r\n              aria-label=\"Close\"\r\n            >\r\n              <span aria-hidden=\"true\" class=\"zmdi zmdi-close\"></span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body pb-4\" v-if=\"courseList.length !== 0\">\r\n            <h5>{{ $t(\"what-is-your-ongoing-course\") }}?</h5>\r\n            <p>\r\n              {{\r\n                $t(\"this-material-can-only-be-viewed-in-the-following-course\")\r\n              }}.\r\n            </p>\r\n            <a\r\n              title=\"\"\r\n              class=\"btn btn-primary btn-outline btn-rounded mr-3 mb-3\"\r\n              v-for=\"course in courseList\"\r\n              :key=\"course.resourceid\"\r\n              data-dismiss=\"modal\"\r\n              @click=\"gotoCourse(course)\"\r\n              >{{ course.course_name }}</a\r\n            >\r\n          </div>\r\n          <div class=\"modal-body pb-4\" v-else>\r\n            <p>\r\n              {{\r\n                $t(\r\n                  \"the-course-you-can-use-this-collection-has-expired-if-you-wish-to-continue-using-it-you-must-renew-your-contract\"\r\n                )\r\n              }}.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n// import CustomHeader from \"../components/CustomHeader\";\r\nimport {\r\n  ApiGetCollectionContent,\r\n  ApiSearchCollection,\r\n  ApiGetAvailableCourse,\r\n  ApiSearchCollectionResource,\r\n} from \"../http/apis/Collection\";\r\nimport Select2 from \"v-select2-component\";\r\nimport $ from \"jquery\";\r\n// import Menu\r\nimport SearchGroup from \"../components/SearchGroup\";\r\nexport default {\r\n  name: \"CollectionDetail\",\r\n  components: {\r\n    CustomHeader: () => import(\"@/components/CustomHeader.vue\"),\r\n    SearchGroup,\r\n  },\r\n  data() {\r\n    return {\r\n      cname: \"\",\r\n      cResourceList: [],\r\n      typeList: [\r\n        { text: \"All type\", id: \"all\" },\r\n        { text: \"Picture Book\", id: \"book\" },\r\n        { text: \"Video\", id: \"video\" },\r\n      ],\r\n      selectType: \"all\",\r\n      courseList: [],\r\n      searchRname: \"\",\r\n      lastPlayList: [],\r\n      tempNote: \"book\",\r\n    };\r\n  },\r\n  created() {},\r\n  watch: {\r\n    // selectType() {\r\n    //   this.searchCollectionResource();\r\n    // },\r\n  },\r\n  mounted() {\r\n    this.cname = this.$route.params.cname;\r\n    this.getCollectionContent();\r\n  },\r\n  computed: {\r\n    userid() {\r\n      return this.$store.state.auth.userid;\r\n    },\r\n    materialSort() {\r\n      let temp = [...this.cResourceList];\r\n      temp.forEach((item) => {\r\n        if (item.unit === undefined) {\r\n          item.unit = \"\";\r\n        }\r\n      });\r\n      return temp;\r\n    },\r\n  },\r\n  methods: {\r\n    getMColList(textbookList) {\r\n      console.log(textbookList);\r\n      this.cResourceList = [...textbookList];\r\n    },\r\n    showLastPlay(lp) {\r\n      this.lastPlayList = [];\r\n      this.lastPlayList = lp;\r\n      $(\"#lastPlayModal\").modal(\"show\");\r\n    },\r\n    searchCollectionResource() {\r\n      let type = this.selectType;\r\n      let keyword = this.searchRname;\r\n      if (this.selectType === \"all\") {\r\n        type = \"*\";\r\n      }\r\n      if (this.searchRname === \"\") {\r\n        keyword = \"*\";\r\n      }\r\n      ApiSearchCollectionResource.get(\r\n        this.userid,\r\n        this.$route.params.cid,\r\n        keyword,\r\n        type\r\n      )\r\n        .then((response) => {\r\n          response.record.forEach((element) => {\r\n            //重建\r\n            element.lastplay = [];\r\n            element.last_access_all.forEach((item) => {\r\n              if (item.last_access !== \"0\") {\r\n                element.lastplay.push(item);\r\n              }\r\n            });\r\n          });\r\n          response.record.forEach((item) => {});\r\n          this.cResourceList = response.record;\r\n        })\r\n        .catch((err) => {});\r\n    },\r\n    getCollectionContent() {\r\n      console.log(this.userid, this.$route.params.cid);\r\n\r\n      ApiGetCollectionContent.get(this.userid, this.$route.params.cid)\r\n        .then((response) => {\r\n          response.record.forEach((element) => {\r\n            //重建\r\n            element.lastplay = [];\r\n            element.last_access_all.forEach((item) => {\r\n              if (item.last_access !== \"0\") {\r\n                element.lastplay.push(item);\r\n              }\r\n            });\r\n          });\r\n          console.log(response.record);\r\n          this.cResourceList = response.record;\r\n        })\r\n        .catch((err) => {});\r\n    },\r\n    gotoCollectionEdit() {\r\n      this.$router.push({\r\n        path: `/collection/edit/${this.$route.params.pid}/${this.$route.params.cname}/${this.$route.params.cid}`,\r\n      });\r\n    },\r\n    gotoCourse(course) {\r\n      console.log(course);\r\n      // http://localhost:8080/web/course_material/course=test%20Course/type=Material/CRSfuqFSTo8pycu7vqtpVz9Xe\r\n      // this.$router.push({\r\n      //   path: `/course_material/course=${course.resource_name}/type=Material/${course.resourceid}`,\r\n      // });\r\n      if (this.tempNote === \"book\") {\r\n        window.open(\r\n          `${process.env.VUE_APP_DOMAIN}/bktchr/?pkgid=${course.pkgid}&colid=${course.colid}&resid=${course.resourceid}&mid=&lmsd=${process.env.VUE_APP_LMSD}&auth=${this.$store.state.auth.token}&crsid=${course.courseid}&userid=${this.userid}`\r\n        );\r\n      } else {\r\n        window.open(\r\n          `${process.env.VUE_APP_DOMAIN}/vptchr/?pkgid=${course.pkgid}&colid=${course.colid}&resid=${course.resourceid}&mid=&lmsd=${process.env.VUE_APP_LMSD}&auth=${this.$store.state.auth.token}&crsid=${course.courseid}&userid=${this.userid}`\r\n        );\r\n      }\r\n    },\r\n    getAvailableCourse(rid) {\r\n      console.log(this.userid, this.$route.params.cid, rid);\r\n      ApiGetAvailableCourse.get(this.userid, this.$route.params.cid, rid)\r\n        .then((response) => {\r\n          this.courseList = response.record;\r\n          console.log(response.record);\r\n        })\r\n        .catch((err) => {});\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.cus-img {\r\n  max-height: 100%;\r\n  max-width: 100%;\r\n  width: auto;\r\n  height: auto;\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n}\r\n.overlay-icon {\r\n  z-index: 99;\r\n}\r\n// a:not([href]):not([tabindex]) {\r\n//   color: rgba(255, 255, 255, 0.9) !important;\r\n// }\r\n</style>","import { render, staticRenderFns } from \"./CollectionDetail.vue?vue&type=template&id=3aa3ce38&scoped=true&\"\nimport script from \"./CollectionDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./CollectionDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CollectionDetail.vue?vue&type=style&index=0&id=3aa3ce38&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3aa3ce38\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionDetail.vue?vue&type=style&index=0&id=3aa3ce38&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionDetail.vue?vue&type=style&index=0&id=3aa3ce38&scoped=true&lang=scss&\""],"sourceRoot":""}