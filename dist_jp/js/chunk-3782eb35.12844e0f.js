(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3782eb35"],{"58ba":function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"c",(function(){return d})),s.d(e,"d",(function(){return o})),s.d(e,"e",(function(){return r})),s.d(e,"f",(function(){return n})),s.d(e,"b",(function(){return l}));var a=s("a95a");const i={get:(t,e,s)=>"admin"===t?void 0===s||""===s?Object(a.b)("/course/list/active/"+e):Object(a.b)(`/course/list/active/${e}?filter=${s}`):(console.log("/course/list/active/"+s),Object(a.b)("/course/list/active/"+s))},d={get:(t,e,s)=>"admin"===t?void 0===s||""===s?Object(a.b)("/course/list/expired/"+e):Object(a.b)(`/course/list/expired/${e}?filter=${s}`):Object(a.b)("/course/list/expired/"+s)},o={get:()=>Object(a.b)("/course/teacherlist")},r={post:(t,e)=>Object(a.c)("/course/search/"+t,e)},n={put:(t,e)=>Object(a.d)("/course/setinfo/"+t,e)},l={get:()=>Object(a.b)("/course/list/all")}},b349:function(t,e,s){"use strict";s.r(e);var a=s("3ed9"),i=s("58ba"),d=s("92c3"),o=s.n(d),r=(s("1e3f"),s("1157")),n=s.n(r),l={name:"AddStudent",data:()=>({newStudent:{name:"",phone:""},dropzoneOptions:{url:"https://httpbin.org/post",thumbnailWidth:200,addRemoveLinks:!0,maxFilesize:5,maxFiles:1,chunking:!0,chunkSize:400},files:{},courseList:[],seleceCourse:"",courseStudentList:[],dupStudentList:[],showErrorMessage:!1,errorMessage:"",showAlreadyExist:!1,alreadyStudendList:[]}),props:["courseid"],components:{vueDropzone:o.a},mounted(){this.getAllCourse()},methods:{async copySList(t){await a.b.get(t,this.courseid).then(t=>{if(this.dupStudentList=t.duplicateList,"success"===t.status)return!0}).catch(t=>{})&&0===this.dupStudentList.length&&(n()("#CopyModal").modal("hide"),this.$bus.$emit("messsage:push","Copy Student Success.","success"),this.$emit("childemit"))},getStudentInfo(t){a.f.get(t).then(t=>{this.courseStudentList=t.record}).catch(t=>{})},getAllCourse(){i.b.get().then(t=>{this.courseList=t.record.map(t=>({id:t.courseid,text:t.course_name}))}).catch(t=>{})},resetStdTemp(){this.newStudent={name:"",phone:""},this.filles={},this.showErrorMessage=!1,this.errorMessage="",this.showAlreadyExist=!1,this.alreadyStudendList=[],this.dupStudentList=[],this.$nextTick(()=>this.$refs.addStdForm.reset())},async addStudent(){if(await this.$refs.addStdForm.validate().then(t=>{if(console.log(t),t)return n()("#SingleStudentModal").modal("hide"),!0})){await a.a.post(this.courseid,this.newStudent).then(t=>{if("success"===t.status)return!0}).catch(t=>{console.log(t)})?(this.$bus.$emit("messsage:push","Add Student Success.","success"),this.$store.dispatch("courseInfo/updateStudent",this.courseid),this.$emit("childemit")):n()("#AlreadyExistsModal").modal("show")}},downloadSample(){a.d.get().then(t=>{var e=window.URL.createObjectURL(new Blob([t])),s=document.createElement("a");s.href=e,s.setAttribute("target","_blank"),s.setAttribute("download","Sample.csv"),document.body.appendChild(s),s.click()}).catch(t=>{})},uploadComplete(t){this.files=t},async importStdFile(){const t=new FormData;t.append("stulist",this.files),await a.h.post(this.courseid,t).then(t=>{if(void 0!==t.record.error&&t.record.error.length>0&&(this.showAlreadyExist=!0,this.alreadyStudendList=t.record.error),"success"===t.status)return!0;"failed"===t.status&&(this.showErrorMessage=!0,this.errorMessage=t.record)}).catch(t=>{console.log(t)})?this.showAlreadyExist||(this.showErrorMessage=!1,this.errorMessage="",this.$refs.myVueDropzone.removeAllFiles(),this.alreadyStudendList=[],n()("#ImportCSVModal").modal("hide"),this.$bus.$emit("messsage:push","New Student Success.","success"),this.$emit("childemit")):this.showErrorMessage=!0}}},c=s("2877"),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"modal fade",attrs:{id:"AddStudentModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("add-student")))]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){t.errorMessage=""}}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"addstudent d-flex justify-content-center"},[s("div",[s("button",{staticClass:"btn btn-primary text-center",attrs:{"data-dismiss":"modal","data-toggle":"modal","data-target":"#SingleStudentModal"}},[t._m(0),s("div",{staticClass:"mt-3"},[t._v(t._s(t.$t("add-a-single-student")))])])]),s("div",[s("button",{staticClass:"btn btn-primary text-center",attrs:{"data-dismiss":"modal","data-toggle":"modal","data-target":"#ImportCSVModal"},on:{click:function(e){t.errorMessage=""}}},[t._m(1),s("div",{staticClass:"mt-3"},[t._v(t._s(t.$t("import-csv")))])])])])])])])]),s("div",{staticClass:"modal fade",attrs:{id:"SingleStudentModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("add-student")))]),t._m(2)]),s("div",{staticClass:"modal-body"},[s("h4",{staticClass:"text-center mb-4 mt-2"},[t._v(" "+t._s(t.$t("add-a-single-student"))+" ")]),s("form",[s("ValidationObserver",{ref:"addStdForm"},[s("ValidationProvider",{attrs:{rules:"required",name:"Studend name"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.failed,i=e.errors;return[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"control-label text-right col-sm-4"},[t._v(t._s(t.$t("student-name")))]),s("div",{staticClass:"col-sm-8"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newStudent.name,expression:"newStudent.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter student name",value:""},domProps:{value:t.newStudent.name},on:{input:function(e){e.target.composing||t.$set(t.newStudent,"name",e.target.value)}}}),s("span",{directives:[{name:"show",rawName:"v-show",value:a,expression:"failed"}],staticClass:"text-danger"},[t._v(t._s(i[0]))])]),s("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$t("the-student-is-already-exists"))+". ")])])]}}])}),s("ValidationProvider",{attrs:{rules:"required",name:"Parents'phone number"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.failed,i=e.errors;return[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"control-label text-right col-sm-4"},[t._v(t._s(t.$t("parents-phone-number")))]),s("div",{staticClass:"col-sm-8"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newStudent.phone,expression:"newStudent.phone"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter unique number",value:""},domProps:{value:t.newStudent.phone},on:{input:function(e){e.target.composing||t.$set(t.newStudent,"phone",e.target.value)}}}),s("span",{directives:[{name:"show",rawName:"v-show",value:a,expression:"failed"}],staticClass:"text-danger"},[t._v(t._s(i[0]))])]),s("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$t("the-number-is-already-exists"))+". ")])])]}}])})],1)],1)]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),s("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button"},on:{click:function(e){return t.addStudent()}}},[t._v(" "+t._s(t.$t("add"))+" ")])])])])]),s("div",{staticClass:"modal fade",attrs:{id:"AlreadyExistsModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"ModalTitle1"}},[t._v(" "+t._s(t.$t("student-profile-already-exists"))+" ")]),t._m(3)]),s("div",{staticClass:"modal-body",attrs:{"data-widget":"dropzone"}},[s("div",{staticClass:"table-responsive border rounded p-10 mb-2"},[s("table",{staticClass:"table table-striped"},[s("thead",[s("tr",[s("th",[t._v(t._s(t.$t("student-name")))]),s("th",[t._v(t._s(t.$t("parentsphone-number")))])])]),s("tbody",[s("tr",[s("td",[t._v(t._s(t.newStudent.name))]),s("td",[t._v(t._s(t.newStudent.phone))])])])])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("ok"))+" ")])])])])]),s("div",{staticClass:"modal fade",attrs:{id:"CopyModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"ModalTitle1"}},[t._v(" "+t._s(t.$t("add-student"))+" ")]),t._m(4)]),s("div",{staticClass:"modal-body"},[s("h4",{staticClass:"text-center mb-4 mt-2"},[t._v(t._s(t.$t("copy")))]),s("p",[t._v(t._s(t.$t("copy-student-from-other-course"))+".")]),s("form",[s("div",{staticClass:"form-group"},[s("select2",{attrs:{id:"s2_course",options:t.courseList},on:{select:function(e){return t.getStudentInfo(t.seleceCourse)}},model:{value:t.seleceCourse,callback:function(e){t.seleceCourse=e},expression:"seleceCourse"}})],1)]),t.courseStudentList.length>0?s("div",{staticClass:"table-responsive border rounded p-10 mb-2",staticStyle:{"max-height":"200px"},attrs:{"data-scroll":"dark"}},[s("table",{staticClass:"table table-striped"},[s("thead",[s("tr",[s("th",[t._v(t._s(t.$t("student-name")))]),s("th",[t._v(t._s(t.$t("parentsphone-number")))])])]),s("tbody",t._l(t.courseStudentList,(function(e){return s("tr",{key:e.username+e.star_uni_info},[s("td",[t._v(t._s(e.username))]),s("td",[t._v(t._s(e.star_uni_info))])])})),0)])]):t._e(),t.courseStudentList.length>0?s("p",{staticClass:"mb-0"},[s("span",{staticClass:"text-primary"},[t._v(t._s(t.courseStudentList.length))]),t._v(" "+t._s(t.$t("all-students"))+" ")]):t._e(),t.dupStudentList.length>0?s("div",{staticClass:"border border-danger rounded mt-4"},[s("p",{staticClass:"text-danger ml-3 mt-3 mb-0"},[t._v(" "+t._s(t.$t("these-students-already-exist-in-the-course"))+". ")]),s("div",{staticClass:"table-responsive p-10 mb-2",staticStyle:{"max-height":"200px"},attrs:{"data-scroll":"dark"}},[s("table",{staticClass:"table table-striped"},[s("thead",[s("tr",[s("th",[t._v(t._s(t.$t("student-name")))])])]),s("tbody",t._l(t.dupStudentList,(function(e){return s("tr",{key:e.stuid},[s("td",[t._v(t._s(e.username))])])})),0)])])]):t._e()]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),s("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button"},on:{click:function(e){return t.copySList(t.seleceCourse)}}},[t._v(" "+t._s(t.$t("copy"))+" ")])])])])]),s("div",{staticClass:"modal fade",attrs:{id:"ImportCSVModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"ModalTitle1"}},[t._v(" "+t._s(t.$t("add-student"))+" ")]),t._m(5)]),s("div",{staticClass:"modal-body",attrs:{"data-widget":"dropzone"}},[s("h4",{staticClass:"text-center mb-4 mt-2"},[t._v(t._s(t.$t("import-csv")))]),s("p",{staticClass:"text-center mb-0"},[t._v(" "+t._s(t.$t("how-to-make-a-csv-file-to-import-students-list"))+"? ")]),s("p",{staticClass:"text-center",on:{click:function(e){return t.downloadSample()}}},[s("a",{staticClass:"download-text pointer"},[t._v(t._s(t.$t("download-sample-files")))])]),s("vue-dropzone",{ref:"myVueDropzone",attrs:{id:"dropzone",options:t.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-complete":t.uploadComplete}},[s("i",{staticClass:"icon dripicons-cloud-upload"}),s("h6",{staticClass:"text-center"},[t._v(" "+t._s(t.$t("select-or-drag-and-drop-a-csv-file"))+". ")]),s("div",{staticClass:"d-block text-center"},[s("button",{staticClass:"btn btn-primary btn-rounded btn-floating",attrs:{type:"button"}},[t._v(" "+t._s(t.$t("upload"))+" ")])])]),t.showAlreadyExist?s("div",{staticClass:"border border-danger rounded mt-4"},[s("p",{staticClass:"text-danger ml-3 mt-3 mb-0"},[t._v(" "+t._s(t.$t("these-students-already-exist-in-the-course"))+". ")]),s("div",{staticClass:"table-responsive p-10 mb-2",staticStyle:{"max-height":"200px"},attrs:{"data-scroll":"dark"}},[s("table",{staticClass:"table table-striped"},[s("thead",[s("tr",[s("th",[t._v(t._s(t.$t("student-name")))]),s("th",[t._v(t._s(t.$t("parentsphone-number")))])])]),s("tbody",t._l(t.alreadyStudendList,(function(e){return s("tr",{key:e.phone},[s("td",[t._v(t._s(e.name))]),s("td",[t._v(t._s(e.phone))])])})),0)])])]):t._e(),t.showErrorMessage?s("p",{staticClass:"text-danger"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e()],1),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),s("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-toggle":"modal"},on:{click:function(e){return t.importStdFile()}}},[t._v(" "+t._s(t.$t("import"))+" ")])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"zmdi zmdi-account-add zmdi-hc-fw display-5"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"zmdi zmdi-accounts-list zmdi-hc-fw display-5"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])}],!1,null,null,null);e.default=u.exports}}]);
//# sourceMappingURL=chunk-3782eb35.12844e0f.js.map