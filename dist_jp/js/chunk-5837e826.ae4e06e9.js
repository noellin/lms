(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5837e826"],{"9b33":function(t,s,e){},b712:function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"pb-3"},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group form-rounded mb-0 mr-3"},[e("select2",{attrs:{id:"s2_demo2",options:t.typeList},model:{value:t.selectType,callback:function(s){t.selectType=s},expression:"selectType"}})],1),e("div",{staticClass:"form-group form-rounded mb-0 mr-3"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchRname,expression:"searchRname"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search material"},domProps:{value:t.searchRname},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.searchCourseResource()},input:function(s){s.target.composing||(t.searchRname=s.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("div",{staticClass:"btn btn-secondary btn-outline btn-icon btn-rounded",attrs:{type:"button"},on:{click:function(s){return t.searchCourseResource()}}},[e("i",{staticClass:"zmdi zmdi-search text-secondary"})])])])]),e("div",{staticClass:"form-group form-rounded mb-0 mr-3"},[e("select2",{attrs:{id:"s2_demo3",options:t.sortTypeList},model:{value:t.selectSortType,callback:function(s){t.selectSortType=s},expression:"selectSortType"}})],1),t.searchStatus?e("div",{staticClass:"form-group form-rounded mb-0 mr-3 d-flex align-items-center text-secondary"},[e("span",{staticClass:"mr-1"},[t._v(t._s(t.sortMList.length))]),t._v(" "+t._s(t.$t("listings-for"))+" “ "),e("span",[t._v(t._s(t.tempSearchName))]),t._v("” ")]):t._e()])])},a=[],o=e("8a49"),l=e("2755"),n={name:"SearchGroup",data(){return{typeList:[{text:"All type",id:"all"},{text:"Picture Book",id:"book"},{text:"Video",id:"video"}],selectType:"all",searchRname:"",selectSortType:"title_asc",searchStatus:!1,tempSearchName:"",textbookList:[],courseid:this.$route.params.courseid,colSortList:[]}},props:["mfilter","page"],methods:{async searchCourseResource(){console.log("get CourseResource list"),""!==this.searchRname?(this.searchStatus=!0,this.tempSearchName=this.searchRname):this.searchStatus=!1;let t=this.selectType;"all"===this.selectType&&(t="*");let s={type:t,keyword:this.searchRname},e=await o["d"].post(this.courseid,s).then(t=>{if(t.record.forEach(t=>{void 0===t.unit&&(t.unit=""),t.link=t.information.includes("http")}),this.textbookList=t.record,"success"===t.status)return!0}).catch(t=>{});e&&this.$emit("getMList",this.sortMList)},async searchCollectionResource(){console.log("get collection list");let t=this.selectType,s=this.searchRname;"all"===this.selectType&&(t="*"),""===this.searchRname&&(s="*"),""!==this.searchRname?(this.searchStatus=!0,this.tempSearchName=this.searchRname):this.searchStatus=!1;let e=await l["k"].get(this.userid,this.$route.params.cid,s,t).then(t=>{if(t.record.forEach(t=>{t.lastplay=[],t.last_access_all.forEach(s=>{"0"!==s.last_access&&t.lastplay.push(s)})}),this.textbookList=t.record,console.log("sortmlist = ",this.sortMList),"success"===t.status)return!0}).catch(t=>{});e&&this.$emit("getMColList",this.sortMList)}},created(){this.openedTextbookList=this.openedTextbookLists},computed:{userid(){return this.$store.state.auth.userid},sortMList(){let t=[];return t="openm"===this.mfilter?this.$_sortMaterial(this.openedMList,this.selectSortType):"openb"===this.mfilter?this.$_sortMaterial(this.openedBookList,this.selectSortType):"openv"===this.mfilter?this.$_sortMaterial(this.openedVideoList,this.selectSortType):this.$_sortMaterial(this.textbookList,this.selectSortType),t},sortTypeList(){return this.$store.state.common.sortTypeList},openedMList(){return this.textbookList.filter(t=>"true"===t.openflag)},openedBookList(){return this.textbookList.filter(t=>"true"===t.openflag&&"book"===t.note)},openedVideoList(){return this.textbookList.filter(t=>"true"===t.openflag&&"video"===t.note)},openedTextbookLists(){return this.$store.state.courseInfo.openedTextbookList}},watch:{mfilter(){"collection"!==this.page?this.searchCourseResource():this.searchCollectionResource()},selectSortType(){"collection"!==this.page?this.searchCourseResource():this.searchCollectionResource()},openedTextbookLists(){this.openedTextbookList=this.openedTextbookLists},searchRname(){"collection"!==this.page?this.searchCourseResource():this.searchCollectionResource()},selectType(){"collection"!==this.page?this.searchCourseResource():this.searchCollectionResource()}}},r=n,c=e("2877"),d=Object(c["a"])(r,i,a,!1,null,null,null);s["a"]=d.exports},beea:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app2"}},[e("div",{staticClass:"main-content"},[e("div",{staticClass:"content page-aside-left"},[e("div",{staticClass:"main-content"},[e("course-header"),e("section",{staticClass:"page-content container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-4 col-md"},[e("div",{staticClass:"card bg-success",staticStyle:{height:"150px"}},[e("div",{staticClass:"card-body d-flex align-content-between flex-wrap mfilter-board",attrs:{"data-toggle":"tooltip","data-placement":"bottom",title:"Click to switch filter"},on:{click:function(s){return t.changemfilter("openm")}}},[e("h5",{staticClass:"card-title"},[t._v(" "+t._s(t.$t("opened-material"))+" "),e("i",{staticClass:"far fa-lightbulb fa-lg mfilter-icon",class:"openm"===t.mfilter?"text-warning":""})]),e("div",{staticClass:"w100 text-right"},[e("p",{staticClass:"card-text text-white"},[e("span",{staticClass:"display-4 counter",attrs:{"data-count":"151"}},[t._v(t._s(t.courseOverview.open))]),e("span",{staticClass:"d-none d-xl-inlineblock"},[t._v("/ "+t._s(t.courseOverview.all))])])])])])]),e("div",{staticClass:"col-4 col-md"},[e("div",{staticClass:"card bg-primary",staticStyle:{height:"150px"}},[e("div",{staticClass:"card-body d-flex align-content-between flex-wrap mfilter-board",attrs:{"data-toggle":"tooltip","data-placement":"bottom",title:"Click to switch filter"},on:{click:function(s){return t.changemfilter("openb")}}},[e("h5",{staticClass:"card-title"},[t._v(" "+t._s(t.$t("opened-books"))+" "),e("i",{staticClass:"far fa-lightbulb fa-lg mfilter-icon",class:"openb"===t.mfilter?"text-warning":""})]),e("div",{staticClass:"w100 text-right"},[e("p",{staticClass:"card-text text-white"},[e("span",{staticClass:"display-4 counter",attrs:{"data-count":"13"}},[t._v(t._s(t.courseOverview.book))])])])])])]),e("div",{staticClass:"col-4 col-md"},[e("div",{staticClass:"card bg-secondary",staticStyle:{height:"150px"}},[e("div",{staticClass:"card-body d-flex align-content-between flex-wrap mfilter-board",attrs:{"data-toggle":"tooltip","data-placement":"bottom",title:"Click to switch filter"},on:{click:function(s){return t.changemfilter("openv")}}},[e("h5",{staticClass:"card-title"},[t._v(" "+t._s(t.$t("opened-videos"))+" "),e("i",{staticClass:"far fa-lightbulb fa-lg mfilter-icon",class:"openv"===t.mfilter?"text-warning":""})]),e("div",{staticClass:"w100 text-right"},[e("p",{staticClass:"card-text text-white"},[e("span",{staticClass:"display-4 counter",attrs:{"data-count":"29"}},[t._v(t._s(t.courseOverview.video))])])])])])]),e("div",{staticClass:"col-6 col-md"},[e("div",{staticClass:"card bg-warning",staticStyle:{height:"150px"}},[e("div",{staticClass:"card-body d-flex align-content-between flex-wrap"},[e("h5",{staticClass:"card-title text-white"},[t._v(" "+t._s(t.$t("picture-book-views"))),e("span",{staticClass:"text-light"},[t._v(t._s(t.$t("student")))])]),e("div",{staticClass:"w100 text-right"},[e("p",{staticClass:"card-text text-white"},[e("span",{staticClass:"display-4 counter",attrs:{"data-count":"173"}},[t._v(t._s(t.courseOverview.readBook))])])])])])]),e("div",{staticClass:"col-6 col-md"},[e("div",{staticClass:"card bg-danger",staticStyle:{height:"150px"}},[e("div",{staticClass:"card-body d-flex align-content-between flex-wrap"},[e("h5",{staticClass:"card-title text-white"},[t._v(" "+t._s(t.$t("video-views"))),e("span",{staticClass:"text-light"},[t._v(t._s(t.$t("student")))])]),e("div",{staticClass:"w100 text-right"},[e("p",{staticClass:"card-text text-white"},[e("span",{staticClass:"display-4 counter",attrs:{"data-count":"197"}},[t._v(t._s(t.courseOverview.watchVideo))])])])])])])]),e("div",{staticClass:"d-flex justify-content-between"},[e("search-group",{attrs:{mfilter:t.mfilter},on:{getMList:t.getMList}}),e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-primary btn-rounded btn-outline mr-2",attrs:{type:"button","data-toggle":"modal","data-target":"#OpenSettingsModal"},on:{click:function(s){return t.copyMArray()}}},[e("i",{staticClass:"la la-gear"}),t._v(t._s(t.$t("quick-open"))+" ")]),e("button",{staticClass:"btn btn-primary btn-rounded btn-outline",attrs:{type:"button",disabled:0===t.tempAList.length},on:{click:function(s){return t.openAssignmentModal()}}},[e("i",{staticClass:"la la-clipboard"}),t._v(t._s(t.$t("assignment"))+" "),e("span",{staticClass:"badge badge-primary"},[t._v(t._s(t.tempAList.length))])])])],1),e("div",{staticClass:"row"},t._l(t.textbookList,(function(s){return e("div",{key:s.resourceid,staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media"},[e("div",{staticClass:"align-self-center overlay-wrap mr-4 w-150 h-150 border"},[e("span",{staticClass:"overlay-icon"},["video"===s.note?e("i",{staticClass:"fas fa-video"}):e("i",{staticClass:"fas fa-book-open"})]),e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://lms.mangosteems.com/cms/resdl/cover/"+s.resourceid,expression:"\n                          'https://lms.mangosteems.com/cms/resdl/cover/' +\n                          textbook.resourceid\n                        "}],staticClass:"overlay-img cus-img",attrs:{alt:"course image"}})]),e("div",{staticClass:"media-body"},[e("div",{staticClass:"d-flex justify-content-between"},[e("div",[""!==s.level?e("span",{staticClass:"badge badge-pill badge-secondary"},[t._v(t._s(t.$t("level"))+" "+t._s(s.level))]):t._e(),""!==s.unit?e("span",{staticClass:"badge badge-pill badge-secondary ml-2"},[t._v(t._s(t.$t("unit"))+" "+t._s(s.unit))]):t._e(),e("h4",{staticClass:"mb-0 mt-3 d-flex align-self-center text-primary"},[e("div",{attrs:{title:""}},[t._v(" "+t._s(s.resource_name)+" "),!0===s.link?e("a",{attrs:{target:"_blank",href:s.worksheet}},[e("i",{staticClass:"fas fa-file-download pointer fa-1x download-icon"})]):t._e()])]),e("p",{staticClass:"text-muted mt-1"},[e("span",{staticClass:"fw300 text-xs"},[t._v(t._s(t.$t("last-played"))+" "),"0"!==s.last_access?e("span",[t._v(t._s(t._f("dateConversion")(s.last_access)))]):e("span",[t._v("--")])])])]),e("div",{staticClass:"text-primary pointer",on:{click:function(e){return t.gotoWebsite(s)}}},[t._v(" "+t._s(t.$t("start"))),t._m(0,!0)])]),e("div",{staticClass:"border-top pt-3 d-flex justify-content-between"},[e("div",["video"===s.note?e("button",{staticClass:"btn btn-sm btn-secondary btn-rounded btn-outline mr-2",attrs:{type:"button","data-toggle":"modal","data-target":"#addAssignment"},on:{click:function(e){t.getVideoMaterial(s.colid,s.resourceid),t.tempRname=s.resource_name,t.tempVMList=t.tempAIDList}}},[e("i",{staticClass:"zmdi zmdi-plus zmdi-hc-fw"}),t._v(t._s(t.$t("assignment"))+" ")]):e("button",{staticClass:"btn btn-sm btn-secondary btn-rounded btn-outline mr-2",attrs:{disabled:t.tempAIDList.includes(s.resourceid),type:"button","data-toggle":"modal"},on:{click:function(e){return t.addToAssignmentList(s)}}},[t.tempAIDList.includes(s.resourceid)?e("i",{staticClass:"zmdi zmdi-assignment-check"}):e("i",{staticClass:"zmdi zmdi-plus zmdi-hc-fw"}),t._v(" "+t._s(t.$t("assignment"))+" ")]),"video"===s.note?e("button",{staticClass:"btn btn-sm btn-secondary btn-rounded btn-outline mr-2",attrs:{type:"button","data-toggle":"modal","data-target":"#addSpeakingquiz"},on:{click:function(e){t.getVideoMaterial(s.colid,s.resourceid),t.tempRname=s.resource_name}}},[e("i",{staticClass:"zmdi zmdi-plus zmdi-hc-fw"}),t._v(t._s(t.$t("speaking-quiz"))+" ")]):e("button",{staticClass:"btn btn-sm btn-secondary btn-rounded btn-outline mr-2",attrs:{type:"button"},on:{click:function(e){return t.gotoSpeakingQuiz(s,s.resource_name)}}},[e("i",{staticClass:"zmdi zmdi-plus zmdi-hc-fw"}),t._v(t._s(t.$t("speaking-quiz"))+" ")]),e("button",{staticClass:"btn btn-sm btn-secondary btn-rounded btn-outline",attrs:{type:"button","data-toggle":"modal"},on:{click:function(e){return t.getCollectionList(s.resourceid,s)}}},[e("i",{staticClass:"zmdi zmdi-plus zmdi-hc-fw"}),t._v(t._s(t.$t("collection"))+" ")])]),e("div",["true"!==s.openflag?e("div",{staticClass:"badge badge-dark badge-pill fw300 mr-2 font-size-md"},[t._v(" "+t._s(t.$t("closed"))+" ")]):t._e(),"true"===s.openflag&&"video"===s.note?e("div",{staticClass:"badge badge-success badge-pill fw300 mr-2 font-size-md"},[t._v(" "+t._s(t.$t("opened"))+" "),e("i",{staticClass:"fas fa-video"})]):"true"===s.openflag&&"book"===s.note?e("div",{staticClass:"badge badge-success badge-pill fw300 mr-2 font-size-md"},[t._v(" "+t._s(t.$t("opened"))+" "),e("i",{staticClass:"fas fa-book-open"})]):t._e(),"true"!==s.openflag?e("button",{staticClass:"btn btn-sm btn-secondary btn-rounded btn-outline",attrs:{type:"button","data-toggle":"modal","data-target":"#OpenMaterial"},on:{click:function(e){t.tempResource=s}}},[t._v(" "+t._s(t.$t("open-material"))+" ")]):e("button",{staticClass:"btn btn-sm btn-secondary btn-rounded btn-outline",attrs:{type:"button","data-toggle":"modal","data-target":"#OpenMaterial"},on:{click:function(e){t.tempResource=s}}},[t._v(" "+t._s(t.$t("close-material"))+" ")])])])])])])])])})),0)])],1)])]),e("div",{staticClass:"modal fade",attrs:{id:"OpenMaterial",tabindex:"-1",role:"dialog","aria-hidden":"true","data-modal":"scroll"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},["true"!==t.tempResource.openflag?e("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("open-material"))+" ")]):e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("close-material")))]),t._m(1)]),e("div",{staticClass:"modal-body"},["true"!==t.tempResource.openflag?e("p",[t._v(" "+t._s(t.$t("open-this-material-and-allow"))+" "),t._v(" "+t._s(t.$t("students-to-view-it"))+". ")]):e("p",[t._v(" "+t._s(t.$t("close-this-material-and-do-not-allow"))+" "),e("em",[t._v(t._s(t.tempResource.resource_name))]),t._v(" "+t._s(t.$t("students-to-view-it"))+" ")])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),"true"===t.tempResource.openflag?e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){t.getOpenResource(t.tempResource.colid.split(";")[0],t.tempResource.resourceid,"false")}}},[t._v(" "+t._s(t.$t("close"))+" ")]):e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){t.getOpenResource(t.tempResource.colid.split(";")[0],t.tempResource.resourceid,"true")}}},[t._v(" "+t._s(t.$t("open"))+" ")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"addtoColletion",tabindex:"-1",role:"dialog","aria-hidden":"true","data-modal":"scroll"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Add-to-collection")))]),t._m(2)]),e("div",{staticClass:"modal-body"},[e("div",[0!==t.existCollectionName.length?e("div",{staticClass:"form-group row"},[e("label",{staticClass:"control-label text-right col-sm-3"},[t._v(t._s(t.$t("existing-in-collection")))]),e("span",{staticClass:"col-sm-9"},t._l(t.existCollectionName,(function(s){return e("span",{key:s,staticClass:"badge badge-secondary badge-pill mr-1"},[t._v(t._s(s))])})),0)]):t._e(),0!==t.filterCollectionList.length?e("div",{staticClass:"form-group row"},[e("label",{staticClass:"control-label text-right col-sm-3"},[t._v(t._s(t.$t("collection")))]),e("div",{staticClass:"col-sm-9"},[e("select2",{attrs:{id:"s2_demo1",options:t.filterCollectionList},on:{select:function(s){t.tempcolid=s.id}},model:{value:t.selectCol,callback:function(s){t.selectCol=s},expression:"selectCol"}})],1)]):t._e(),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"control-label text-right col-sm-3"},[t._v(t._s(t.$t("sequence")))]),e("div",{staticClass:"col-sm-9"},[e("div",{staticStyle:{"max-height":"300px"},attrs:{"data-scroll":"dark"}},[e("li",{staticClass:"d-flex justify-content-between"},[e("div",{staticClass:"btn btn-nostyle btn-move mr-3"},[t._v(" "+t._s(t.tempResource.resource_name)+" ")])])])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return t.gotoCreateCol()}}},[t._v(" "+t._s(t.$t("create-new-collection"))+" ")]),0!==t.filterCollectionList.length?e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal",disabled:""===t.selectCol},on:{click:function(s){return t.addResource()}}},[t._v(" "+t._s(t.$t("add-to-collection"))+" ")]):t._e()])])])]),e("div",{staticClass:"modal fade",attrs:{id:"addAssignment",tabindex:"-1",role:"dialog","aria-hidden":"true","data-modal":"scroll"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"ModalTitle1"}},[e("i",{staticClass:"zmdi zmdi-plus zmdi-hc-fw"}),t._v(t._s(t.$t("assignment"))+" ")]),t._m(3)]),e("div",{staticClass:"modal-body"},[e("p",[t._v(t._s(t.tempRname))]),t._l(t.videoMaterialList,(function(s){return e("div",{key:s.materialid,staticClass:"custom-control custom-checkbox form-check pb-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempVMList,expression:"tempVMList"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:s.materialid.toString()+"_"+s.resourceid.toString()},domProps:{value:s.materialid.toString()+"_"+s.resourceid.toString(),checked:Array.isArray(t.tempVMList)?t._i(t.tempVMList,s.materialid.toString()+"_"+s.resourceid.toString())>-1:t.tempVMList},on:{change:function(e){var i=t.tempVMList,a=e.target,o=!!a.checked;if(Array.isArray(i)){var l=s.materialid.toString()+"_"+s.resourceid.toString(),n=t._i(i,l);a.checked?n<0&&(t.tempVMList=i.concat([l])):n>-1&&(t.tempVMList=i.slice(0,n).concat(i.slice(n+1)))}else t.tempVMList=o}}}),e("label",{staticClass:"custom-control-label",attrs:{for:s.materialid.toString()+"_"+s.resourceid.toString()}},[t._v(t._s(s.material_name))])])}))],2),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("close"))+" ")]),e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return t.addtoSequence()}}},[t._v(" "+t._s(t.$t("save-changes"))+" ")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"addSpeakingquiz",tabindex:"-1",role:"dialog","aria-hidden":"true","data-modal":"scroll"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"ModalTitle1"}},[t._v(" "+t._s(t.$t("speaking-quiz"))+" ")]),t._m(4)]),e("div",{staticClass:"modal-body"},[e("p",[t._v(t._s(t.tempRname))]),e("div",t._l(t.videoMaterialList,(function(s){return e("a",{key:s.materialid,staticClass:"btn btn-primary btn-outline btn-block",on:{click:function(e){return t.gotoSpeakingQuiz(s,t.tempRname)}}},[t._v(t._s(s.material_name))])})),0)])])])]),e("div",{staticClass:"modal fade",attrs:{id:"OpenSettingsModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"ModalTitle1"}},[t._v(" "+t._s(t.$t("open-settings"))+" ")]),t._m(5)]),e("div",{staticClass:"modal-body"},[e("div",[t._v(" "+t._s(t.$t("total-of"))+" "),e("span",{staticClass:"text-primary bold"},[t._v(t._s(t.textbookList.length))]),t._v(" "+t._s(t.$t("materials"))+" ")]),e("div",[e("span",{staticClass:"mr-4"},[t._v(t._s(t.$t("opened"))+"："),e("span",{staticClass:"text-primary bold"},[t._v(t._s(t.openedMList.length))])]),e("span",{},[t._v(t._s(t.$t("closed"))+"："),e("span",{staticClass:"bold"},[t._v(t._s(t.closedMList.length))])])]),e("div",{staticClass:"mt-4"},[t._v(" "+t._s(t.$t("check-which-materials-you-want-to-open"))+" ")]),e("div",{staticClass:"table-responsive"},[0===t.textbookList.length?e("h2",[t._v(" "+t._s(t.$t("no-relevant-records"))+" ")]):e("table",{staticClass:"table table-striped"},[e("thead",[e("tr",[e("th",[e("div",{staticClass:"custom-control custom-checkbox form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAllTB,expression:"selectAllTB"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customCheck2"},domProps:{checked:Array.isArray(t.selectAllTB)?t._i(t.selectAllTB,null)>-1:t.selectAllTB},on:{click:t.selectAllTBft,change:function(s){var e=t.selectAllTB,i=s.target,a=!!i.checked;if(Array.isArray(e)){var o=null,l=t._i(e,o);i.checked?l<0&&(t.selectAllTB=e.concat([o])):l>-1&&(t.selectAllTB=e.slice(0,l).concat(e.slice(l+1)))}else t.selectAllTB=a}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"customCheck2"}})])]),0!==t.courseInfo.cntLevel?e("th",{staticClass:"pointer",on:{click:function(s){return t.sortTable("level")}}},[t._v(" "+t._s(t.$t("level"))),e("i",{staticClass:"zmdi zmdi-swap-vertical ml-1 zmdi-hc-lg"})]):t._e(),e("th",{staticClass:"pointer",on:{click:function(s){return t.sortTable("resource_name")}}},[t._v(" "+t._s(t.$t("material"))+" "),e("i",{staticClass:"zmdi zmdi-swap-vertical ml-1 zmdi-hc-lg"})])])]),e("tbody",t._l(t.copyTextbookList,(function(s,i){return e("tr",{key:s.resourceid+i},[e("td",[e("div",{staticClass:"custom-control custom-checkbox form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.openedTextbookList,expression:"openedTextbookList"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:s.resourceid},domProps:{value:s.colid+"_"+s.resourceid,checked:Array.isArray(t.openedTextbookList)?t._i(t.openedTextbookList,s.colid+"_"+s.resourceid)>-1:t.openedTextbookList},on:{change:function(e){var i=t.openedTextbookList,a=e.target,o=!!a.checked;if(Array.isArray(i)){var l=s.colid+"_"+s.resourceid,n=t._i(i,l);a.checked?n<0&&(t.openedTextbookList=i.concat([l])):n>-1&&(t.openedTextbookList=i.slice(0,n).concat(i.slice(n+1)))}else t.openedTextbookList=o}}}),e("label",{staticClass:"custom-control-label",attrs:{for:s.resourceid}})])]),0!==t.courseInfo.cntLevel?e("td",[""!==s.level?e("span",[t._v(t._s(t.$t("level"))+" "+t._s(s.level))]):e("span")]):t._e(),e("td",[t._v(" "+t._s(s.resource_name)+" ")])])})),0)])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return t.materialOpenSetting()}}},[t._v(" "+t._s(t.$t("save"))+" ")])])])])]),t.studentList.length>0?e("div",{staticClass:"modal fade",attrs:{id:"AssignmentModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("assignment")))]),t._m(6)]),e("div",{staticClass:"modal-body"},[e("form",[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-form-label col-sm-3 text-right"},[t._v(t._s(t.$t("assignment-name")))]),e("div",{staticClass:"col-sm-6"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newAgtName,expression:"newAgtName"}],staticClass:"form-control form-control-lg",attrs:{type:"text",id:"agtname",placeholder:"Asignment name"},domProps:{value:t.newAgtName},on:{input:function(s){s.target.composing||(t.newAgtName=s.target.value)}}})])]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"control-label text-right col-sm-3"},[t._v(t._s(t.$t("material")))]),e("div",{staticClass:"col-sm-9"},[e("div",{staticClass:"bg-light rounded",attrs:{"data-scroll":"dark"}},[e("ul",{staticClass:"sequence a-sequence"},[e("draggable",t._b({staticClass:"list-group",attrs:{tag:"ul"},on:{start:function(s){t.drag=!0},end:function(s){t.drag=!1}},model:{value:t.tempAList,callback:function(s){t.tempAList=s},expression:"tempAList"}},"draggable",t.dragOptions,!1),t._l(t.tempAList,(function(s,i){return e("li",{key:i,staticClass:"d-flex justify-content-between border bg-white rounded"},[e("div",{staticClass:"d-flex justify-content-start"},[e("div",{staticClass:"btn btn-nostyle btn-move"},[e("i",{staticClass:"la la-ellipsis-v"}),e("i",{staticClass:"la la-ellipsis-v"})]),"book"===s.note?e("span",{staticClass:"d-flex col-sm-11 px-0"},[e("span",{staticClass:"badge badge-pill badge-primary fix-badge-height"},[t._v(t._s(t.$t("reading")))]),e("span",{staticClass:"col-sm-10 d-flex align-items-center"},[t._v(t._s(s.resource_name))])]):"video"===s.note?e("div",{staticClass:"d-flex col-sm-11 px-0"},[e("div",[e("span",{staticClass:"badge badge-pill badge-warning fix-badge-height"},[t._v(t._s(t.$t("watching")))])]),e("span",{staticClass:"col-sm-10 d-flex align-items-center"},[t._v(" "+t._s(s.resource_name+" - "+s.material_name)+" ")])]):e("span",{staticClass:"d-flex col-sm-11 px-0"},[e("span",{staticClass:"badge badge-pill badge-accent fix-badge-height"},[t._v(t._s(t.$t("speaking-quiz")))]),e("span",{staticClass:"col-sm-10 d-flex align-items-center"},[t._v(t._s(s.resource_name)+" - "),"undefined"!==s.material_name?e("span",[t._v(t._s(s.material_name))]):e("span",[t._v(t._s(t.$t("book")))])])])]),e("i",{staticClass:"zmdi zmdi-minus-circle zmdi-hc-2x text-secondary pointer",on:{click:function(e){return t.removeAssignment(s.note,s)}}})])})),0)],1)])])]),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-form-label col-sm-3 text-right"},[t._v(t._s(t.$t("due")))]),e("div",{staticClass:"col-sm-8"},[e("date-picker",{attrs:{valueType:"format",range:"","disabled-date":t.disabledBeforeToday},model:{value:t.AssignmentDue,callback:function(s){t.AssignmentDue=s},expression:"AssignmentDue"}})],1)]),e("div",{staticClass:"form-group row align-items-start m-0"},[e("label",{staticClass:"control-label text-right col-sm-3"}),e("small",{staticClass:"col-sm-7"},[e("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" "+t._s(t.$t("press-and-hold-the-ctrl-key-for-multiple-selections"))+".")])]),e("div",{staticClass:"form-group row align-items-start",style:{height:28*[parseInt(t.selectStudent.length/3)+3]+"px"}},[e("label",{staticClass:"control-label text-right col-sm-3"},[t._v(t._s(t.$t("for-students")))]),e("div",{staticClass:"col-sm-6"},[e("select2",{attrs:{id:"s2_student",options:t.studentList,settings:{multiple:!0}},model:{value:t.selectStudent,callback:function(s){t.selectStudent=s},expression:"selectStudent"}})],1),e("div",{staticClass:"col-sm-2 px-0 align-items-center d-flex hover-expand"},[!1===t.showStuTable?e("i",{staticClass:"zmdi zmdi-unfold-more pointer hover-blue mr-1",on:{click:function(s){t.showStuTable=!t.showStuTable}}}):e("i",{staticClass:"zmdi zmdi-unfold-less pointer hover-blue mr-1",on:{click:function(s){t.showStuTable=!t.showStuTable}}}),e("label",{staticClass:"form-check-label pointer hover-blue",attrs:{for:"expand"},on:{click:function(s){t.showStuTable=!t.showStuTable}}},[!1===t.showStuTable?e("span",[t._v(t._s(t.$t("expand-list")))]):e("span",[t._v(t._s(t.$t("close-list")))])])])]),t.showStuTable?e("div",{staticClass:"form-group row align-items-start"},[e("label",{staticClass:"control-label text-right col-sm-3"}),e("div",{staticClass:"col-sm-9 row"},[e("div",{staticClass:"custom-control custom-checkbox col-sm-12 ml-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAllS,expression:"selectAllS"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"std",name:"std"},domProps:{checked:Array.isArray(t.selectAllS)?t._i(t.selectAllS,null)>-1:t.selectAllS},on:{change:function(s){var e=t.selectAllS,i=s.target,a=!!i.checked;if(Array.isArray(e)){var o=null,l=t._i(e,o);i.checked?l<0&&(t.selectAllS=e.concat([o])):l>-1&&(t.selectAllS=e.slice(0,l).concat(e.slice(l+1)))}else t.selectAllS=a}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"std"}},[e("strong",[t._v(t._s(t.$t("all-students")))])])]),t._l(t.studentList,(function(s,i){return e("div",{key:s.id+i,staticClass:"px-3"},[e("div",{staticClass:"custom-control custom-checkbox mr-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectStudent,expression:"selectStudent"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:s.id},domProps:{value:s.id,checked:Array.isArray(t.selectStudent)?t._i(t.selectStudent,s.id)>-1:t.selectStudent},on:{change:function(e){var i=t.selectStudent,a=e.target,o=!!a.checked;if(Array.isArray(i)){var l=s.id,n=t._i(i,l);a.checked?n<0&&(t.selectStudent=i.concat([l])):n>-1&&(t.selectStudent=i.slice(0,n).concat(i.slice(n+1)))}else t.selectStudent=o}}}),e("label",{staticClass:"custom-control-label",attrs:{for:s.id}},[t._v(t._s(s.text))])])])}))],2)]):t._e()])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("close"))+" ")]),e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal","data-toggle":"modal","data-target":"#AssignmentModal-2",disabled:t.AssignmentSetting}},[t._v(" "+t._s(t.$t("next"))+" ")])])])])]):t._e(),e("div",{staticClass:"modal fade",attrs:{id:"AssignmentModal-2",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"ModalTitle1"}},[t._v(t._s(t.$t("assignment")))]),t._m(7)]),e("div",{staticClass:"modal-body"},[e("h5",[t._v(t._s(t.$t("how-difficult-is-this-assignment"))+"?")]),e("p",[t._v(" "+t._s(t.$t("system-will-send-more-rewards-to-more-difficult-assignment"))+". ")]),t._l(t.rewardList,(function(s,i){return e("p",{key:s.exp,staticClass:"mb-0 monospace"},[t._v(" "+t._s(t.$t("level"))+" "),e("span",{class:"yellow-"+(i+1)},[t._v(t._s(i+1)+" ")]),t._v(" => "+t._s(t.$t("exp"))+". "),e("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(s.exp))]),t._v(" , "+t._s(t.$t("lucky-draw-ticket"))+" "),e("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(s.ticket))])])})),e("div",{staticClass:"text-center mt-4 mb-4"},[e("div",{staticClass:"form-check form-check-inline text-primary"},[t._v(" "+t._s(t.$t("easy"))+" ")]),t._l(t.difficultList,(function(s,i){return e("div",{key:s,staticClass:"custom-control custom-radio custom-control-inline mx-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.difficult,expression:"difficult"}],staticClass:"custom-control-input pointer",attrs:{type:"radio",id:s,name:"RadioInline"},domProps:{value:s,checked:t._q(t.difficult,s)},on:{change:function(e){t.difficult=s}}}),e("label",{staticClass:"custom-control-label pointer",class:"yellow-"+(i+1),attrs:{for:s}},[t._v(t._s(s))])])})),e("div",{staticClass:"form-check form-check-inline text-primary"},[t._v(" "+t._s(t.$t("difficult"))+" ")])],2)],2),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return t.setAssignment()}}},[t._v(" "+t._s(t.$t("assign"))+" ")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"messageModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"ModalTitle1"}},[t._v(t._s(t.$t("message")))]),t._m(8)]),e("div",{staticClass:"modal-body"},[e("p",[t._v(t._s(t.$t("no-related-collection-can-be-added"))+".")]),e("p",[t._v(" "+t._s(t.$t("please-create-a-collection-of-the-resource-before-adding-the-material"))+" ")])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("close"))+" ")]),e("button",{staticClass:"btn btn-primary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return t.gotoCreateCol()}}},[t._v(" "+t._s(t.$t("create-collection"))+" ")])])])])])])},a=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("a",{staticClass:"btn-rounded-icon btn-primary rounded ml-2"},[e("i",{staticClass:"zmdi zmdi-arrow-right zmdi-hc-fw text-white"})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-Cancel",attrs:{"aria-hidden":"true"}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])}],o=e("8a49"),l=e("2755"),n=e("3ed2"),r=e("ec45"),c=(e("411c"),e("5a0c")),d=e.n(c),u=e("1157"),m=e.n(u),p=e("b76a"),h=e.n(p),b=e("2ef0"),g=e.n(b),v=e("b712"),f={name:"CourseMaterial",components:{CourseHeader:n["a"],DatePicker:r["a"],draggable:h.a,SearchGroup:v["a"]},data(){return{courseid:this.$route.params.courseid,searchRname:"",typeList:[{text:"All type",id:"all"},{text:"Picture Book",id:"book"},{text:"Video",id:"video"}],selectType:"all",selectSortType:"title_asc",searchStatus:!1,searchRList:[],courseid:this.$route.params.courseid,clicked:[],videoMaterialList:[],tempRname:"",tempVMList:[],collectionList:[],selectCol:"",tempResource:{},tempcolid:"",textbookList:[],studentList:[],selectStudent:[],tempSelectStudent:[],selectAllS:!1,AssignmentDue:null,difficult:"1",difficultList:["1","2","3","4","5"],tempAIDList:[],tempAList:[],openedTextbookList:[],setStudent:!1,existCollectionName:[],pkgid:{},showStuTable:!1,courseInfo:{},selectAllTB:"",sortStatus:!1,tempSortItem:"",copyTextbookList:[],courseOverview:[],newAgtName:"",mfilter:"",tempSearchName:"",rewardList:[{exp:"100",ticket:"1"},{exp:"150",ticket:"1"},{exp:"200",ticket:"2"},{exp:"250",ticket:"2"},{exp:"300",ticket:"3"}]}},created(){this.textbookList=this.textbookLists,this.openedTextbookList=this.openedTextbookLists,this.studentList=this.studentLists,this.tempAIDList=this.tempAIDLists,this.tempAList=this.tempALists,this.pkgid=this.pkgids,this.courseInfo=this.courseInfos,this.courseOverview=this.courseOverviews},mounted(){m()((function(){m()('[data-toggle="tooltip"]').tooltip()}))},watch:{courseOverviews(){this.courseOverview=this.courseOverviews},courseInfos(){this.courseInfo=this.courseInfos},pkgids(){this.pkgid=this.pkgids},openedTextbookLists(){this.openedTextbookList=this.openedTextbookLists},textbookLists(){this.textbookList=this.textbookLists},studentLists(){this.studentList=this.studentLists},selectAllS(){this.selectAllS?(this.selectStudent=[],this.studentList.forEach(t=>{this.selectStudent.push(t.id)})):this.selectStudent=this.tempSelectStudent},tempAIDLists(){this.tempAIDList=this.tempAIDLists},tempALists(){this.tempAList=this.tempALists},searchRname(){this.searchCourseResource()},selectType(){this.searchCourseResource()}},computed:{sortMList(){return"openm"===this.mfilter?this.$_sortMaterial(this.openedMList,this.selectSortType):"openb"===this.mfilter?this.$_sortMaterial(this.openedBookList,this.selectSortType):"openv"===this.mfilter?this.$_sortMaterial(this.openedVideoList,this.selectSortType):this.$_sortMaterial(this.textbookList,this.selectSortType)},sortTypeList(){return this.$store.state.common.sortTypeList},courseOverviews(){return this.$store.state.courseInfo.courseOverview},courseInfos(){return this.$store.state.courseInfo.courseInfo},openedMList(){return this.textbookList.filter(t=>"true"===t.openflag)},openedBookList(){return this.textbookList.filter(t=>"true"===t.openflag&&"book"===t.note)},openedVideoList(){return this.textbookList.filter(t=>"true"===t.openflag&&"video"===t.note)},closedMList(){return this.textbookList.filter(t=>"true"!==t.openflag)},filterCollectionList(){return this.existCollectionName=[],this.collectionList.filter(t=>(console.log(t),console.log(this.tempResource.resourceid),t.rid===this.tempResource.resourceid&&this.existCollectionName.push(t.text),t.rid!==this.tempResource.resourceid))},dragOptions(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}},AssignmentSetting(){return null===this.AssignmentDue||this.selectStudent.length<=0||""===this.newAgtName||!!this.AssignmentDue.includes(null)},pkgids(){return this.$store.state.courseInfo.courseInfo.pkgid},openedTextbookLists(){return this.$store.state.courseInfo.openedTextbookList},textbookLists(){return this.$store.state.courseInfo.textbookList},studentLists(){return this.$store.state.courseInfo.forSelectStudentList},userid(){return this.$store.state.auth.userid},tempAIDLists(){return this.$store.state.courseInfo.caidList},tempALists(){return this.$store.state.courseInfo.caList}},methods:{getMList(t){this.textbookList=t},changemfilter(t){t===this.mfilter?this.mfilter="":this.mfilter=t},sortTable(t){(""===this.tempSortItem||this.tempSortItem!==t)&&(this.tempSortItem=t,this.sortStatus=!1),this.sortStatus=!this.sortStatus,this.sortStatus?this.copyTextbookList=g.a.sortBy(this.copyTextbookList,[t],["asc"]):this.copyTextbookList=this.copyTextbookList.reverse()},disabledBeforeToday(t){let s=new Date;return s.setHours(0,0,0,0),t<s},openAssignmentModal(){this.studentList.length<=0?this.$bus.$emit("messsage:push","Please add students to the course first.","danger"):m()("#AssignmentModal").modal("show")},addTag(t){t.substring(0,2),Math.floor(1e7*Math.random())},async getCollectionList(t,s){let e=this;this.tempResource=s,this.collectionList=[];let i=await l["g"].get(this.userid,t).then(t=>{if(this.collectionList=t.record.map(t=>({id:t.collectionid,text:t.collection_name,rid:t.resourceid})),"success"===t.status)return!0}).catch(t=>{});i&&(0!==e.existCollectionName.length||0!==e.filterCollectionList.length?m()("#addtoColletion").modal("show"):m()("#messageModal").modal("show"))},addResource(){this.selectCol=this.selectCol.toString(),this.tempResource.resourceid=this.tempResource.resourceid.toString(),l["a"].get(this.selectCol,this.tempResource.resourceid).then(t=>{console.log(t),"success"===t.status?(this.$bus.$emit("messsage:push","Successful addition to the collection.","success"),this.selectCol=""):(this.$bus.$emit("messsage:push","Unknown error.","danger"),this.selectCol="")}).catch(t=>{})},addToAssignmentList(t){console.log(t),this.$store.dispatch("courseInfo/setAssignment",{assignment:t,id:t.resourceid})},searchCourseResource(){""!==this.searchRname?(this.searchStatus=!0,this.tempSearchName=this.searchRname):this.searchStatus=!1;let t=this.selectType;"all"===this.selectType&&(t="*");let s={type:t,keyword:this.searchRname};o["d"].post(this.courseid,s).then(t=>{t.record.forEach(t=>{void 0===t.unit&&(t.unit=""),t.link=t.information.includes("http")}),this.textbookList=t.record}).catch(t=>{})},async getVideoMaterial(t,s){let e=t.split(";")[0],i=await o["c"].get(e,this.courseid,s).then(t=>{if(this.videoMaterialList=t.record,"success"===t.status)return!0}).catch(t=>{});i&&this.videoMaterialList.forEach(t=>{t.resource_name=this.tempRname})},addtoSequence(){let t=this.tempVMList.filter(t=>-1===this.tempAIDList.indexOf(t)).concat(this.tempAIDList.filter(t=>-1===this.tempVMList.indexOf(t))),s=[];t.forEach(t=>{t=t.split("_")[0],s.push(t)});let e=[];this.videoMaterialList.forEach(t=>{s.includes(t.materialid)&&e.push(t)}),e.sort((t,s)=>(""+t.material_name).localeCompare(s.material_name)),e.forEach(t=>{this.tempAIDList.includes(t.materialid+"_"+t.resourceid)?this.$store.dispatch("courseInfo/removeAssignment",{id:t.materialid+"_"+t.resourceid}):this.$store.dispatch("courseInfo/setAssignment",{assignment:t,id:t.materialid+"_"+t.resourceid})}),this.$bus.$emit("messsage:push","Add to the temporary assignment list","success")},removeAssignment(t,s){console.log("delete assignment"),console.log("type = ",t),console.log("obj = ",s),"book"===t?this.$store.dispatch("courseInfo/removeAssignment",{id:s.resourceid}):"video"===t?this.$store.dispatch("courseInfo/removeAssignment",{id:s.materialid+"_"+s.resourceid}):this.$store.dispatch("courseInfo/removeAssignment",{id:s.quizid})},gotoWebsite(t){"book"===t.note?window.open(`/bktchr/?pkgid=${this.courseInfo.pkgid}&colid=${this.courseInfo.colid}&resid=${t.resourceid}&mid=&lmsd=jp&auth=${this.$store.state.auth.token}&crsid=${this.courseInfo.courseid}&userid=${this.userid}`):window.open(`/vptchr/?pkgid=${this.courseInfo.pkgid}&colid=${this.courseInfo.colid}&resid=${t.resourceid}&mid=&lmsd=jp&auth=${this.$store.state.auth.token}&crsid=${this.courseInfo.courseid}&userid=${this.userid}`)},async setAssignment(){let t={};t.userid=this.userid,t.publish_date=d()(this.AssignmentDue[0]).unix(),t.expiry_date=d()(this.AssignmentDue[1]).unix(),t.difficult=this.difficult,t.description=this.newAgtName,this.selectStudent.includes("*")||this.selectStudent.length===this.studentList?t.student="all":t.student=this.selectStudent.join(";"),this.tempAList.forEach(t=>{"video"===t.note?this.$set(t,"assignment_type","watching"):"book"===t.note?this.$set(t,"assignment_type","reading"):this.$set(t,"assignment_type","speaking")}),t.content=this.tempAList;let s=await o["e"].post(this.courseid,t).then(t=>{if("success"===t.status)return this.$bus.$emit("messsage:push","New assignment success!","success"),!0;console.log(t),this.$bus.$emit("messsage:push","Unknown error!!","danger")}).catch(t=>{});s&&(this.$store.dispatch("courseInfo/clearCourseTempAssignment",this.$route.params.courseid),this.$store.dispatch("courseInfo/updateTextbookList",this.$route.params.courseid),this.newAgtName="",this.selectAllS=!1,this.selectStudent="",this.AssignmentDue=null,this.difficult="",this.$bus.$emit("messsage:push","New assignment success.","success"))},async materialOpenSetting(){let t=[];this.openedTextbookList.forEach((s,e)=>{this.openedTextbookLists.includes(s)||t.push(this.getOpenResource(s.split(";")[0],s.split("_")[1],"true"))}),this.openedTextbookLists.forEach((s,e)=>{this.openedTextbookList.includes(s)||t.push(this.getOpenResource(s.split(";")[0],s.split("_")[1],"false"))}),this.axios.all(t).then(await this.axios.spread(t=>{this.$store.dispatch("courseInfo/updateTextbookList",this.$route.params.courseid)})).catch(t=>{})},async getOpenResource(t,s,e){let i=await o["b"].get(t,this.$route.params.courseid,s,e).then(t=>{if("success"===t.status)return!0}).catch(t=>{});return i&&(console.log("update info"),this.$store.dispatch("courseInfo/updateTextbookList",this.$route.params.courseid)),i},gotoSpeakingQuiz(t,s=""){m()("#addSpeakingquiz").modal("hide");let e="video";"book"===t.note&&(e="book");let i=`/quiz/${this.$route.params.course}/Speaking Quiz/${s}/${t.material_name}/${this.courseid}/${e}/${t.resourceid}/${t.materialid}`;i=i.replaceAll("?","%3F"),this.$router.push({path:i})},gotoCreateCol(){this.$router.push({path:"/collection/create/"+this.pkgid})},copyMArray(){console.log(this.sortMList),this.copyTextbookList=[...this.textbookList]},selectAllTBft(t){const s=this;t.currentTarget.checked?(s.openedTextbookList=[],s.textbookList.forEach((function(t,e){s.openedTextbookList.push(`${t.colid}_${t.resourceid}`)}))):s.openedTextbookList=[]}}},_=f,C=(e("ebd7"),e("2877")),k=Object(C["a"])(_,i,a,!1,null,"78b9a894",null);s["default"]=k.exports},ebd7:function(t,s,e){"use strict";var i=e("9b33"),a=e.n(i);a.a}}]);
//# sourceMappingURL=chunk-5837e826.ae4e06e9.js.map