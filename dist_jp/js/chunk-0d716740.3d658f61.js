(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0d716740"],{"25f7":function(t,s,a){"use strict";a.r(s);var e=a("2755"),i=(a("3f5b"),a("1157")),o=a.n(i),l={name:"CollectionDetail",components:{CustomHeader:()=>Promise.resolve().then(a.bind(null,"339c")),SearchGroup:a("b712").a},data:()=>({cname:"",cResourceList:[],typeList:[{text:"All type",id:"all"},{text:"Picture Book",id:"book"},{text:"Video",id:"video"}],selectType:"all",courseList:[],searchRname:"",lastPlayList:[],tempNote:"book"}),created(){},watch:{},mounted(){this.cname=this.$route.params.cname,this.getCollectionContent()},computed:{userid(){return this.$store.state.auth.userid},materialSort(){let t=[...this.cResourceList];return t.forEach(t=>{void 0===t.unit&&(t.unit="")}),t}},methods:{getMColList(t){console.log(t),this.cResourceList=[...t]},showLastPlay(t){this.lastPlayList=[],this.lastPlayList=t,o()("#lastPlayModal").modal("show")},searchCollectionResource(){let t=this.selectType,s=this.searchRname;"all"===this.selectType&&(t="*"),""===this.searchRname&&(s="*"),e.k.get(this.userid,this.$route.params.cid,s,t).then(t=>{t.record.forEach(t=>{t.lastplay=[],t.last_access_all.forEach(s=>{"0"!==s.last_access&&t.lastplay.push(s)})}),t.record.forEach(t=>{}),this.cResourceList=t.record}).catch(t=>{})},getCollectionContent(){console.log(this.userid,this.$route.params.cid),e.e.get(this.userid,this.$route.params.cid).then(t=>{t.record.forEach(t=>{t.lastplay=[],t.last_access_all.forEach(s=>{"0"!==s.last_access&&t.lastplay.push(s)})}),console.log(t.record),this.cResourceList=t.record}).catch(t=>{})},gotoCollectionEdit(){this.$router.push({path:`/collection/edit/${this.$route.params.pid}/${this.$route.params.cname}/${this.$route.params.cid}`})},gotoCourse(t){console.log(t),"book"===this.tempNote?window.open(`/bktchr/?pkgid=${t.pkgid}&colid=${t.colid}&resid=${t.resourceid}&mid=&lmsd=jp&auth=${this.$store.state.auth.token}&crsid=${t.courseid}&userid=${this.userid}`):window.open(`/vptchr/?pkgid=${t.pkgid}&colid=${t.colid}&resid=${t.resourceid}&mid=&lmsd=jp&auth=${this.$store.state.auth.token}&crsid=${t.courseid}&userid=${this.userid}`)},getAvailableCourse(t){console.log(this.userid,this.$route.params.cid,t),e.c.get(this.userid,this.$route.params.cid,t).then(t=>{this.courseList=t.record,console.log(t.record)}).catch(t=>{})}}},r=(a("5b90"),a("2877")),c=Object(r.a)(l,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"app3"}},[a("div",{staticClass:"content-wrapper"},[a("custom-header"),a("div",{staticClass:"content"},[a("header",{staticClass:"page-header"},[a("div",{staticClass:"d-flex align-items-start"},[a("div",{staticClass:"mt-2 mr-3"},[a("a",{staticClass:"btn-rounded-icon btn-primary ml-2 pointer",on:{click:t.$back}},[a("i",{staticClass:"zmdi zmdi-arrow-left zmdi-hc-fw text-white"})])]),a("div",{staticClass:"mr-auto"},[a("h1",[t._v(t._s(t.$t("collection")))]),a("p",{staticClass:"second-title"},[t._v(t._s(t.cname))])])])]),a("section",{staticClass:"page-content container-fluid"},[a("div",{staticClass:"d-flex justify-content-between"},[a("search-group",{attrs:{mfilter:"",page:"collection"},on:{getMColList:t.getMColList}}),a("div",{staticClass:"text-right"},[a("a",{staticClass:"btn btn-primary btn-rounded btn-outline",on:{click:function(s){return t.gotoCollectionEdit()}}},[a("i",{staticClass:"la la-edit"}),t._v(t._s(t.$t("edit")))])])],1),a("div",{staticClass:"row"},t._l(t.cResourceList,(function(s,e){return a("div",{key:s.resourceid+e,staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"media"},[a("div",{staticClass:"align-self-center overlay-wrap mr-4 w-150 h-150 border"},[a("span",{staticClass:"overlay-icon"},["video"===s.note?a("i",{staticClass:"fas fa-video"}):a("i",{staticClass:"fas fa-book-open"})]),a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://lms.mangosteems.com/cms/resdl/cover/"+s.resourceid,expression:"\n                        'https://lms.mangosteems.com/cms/resdl/cover/' +\n                        cr.resourceid\n                      "}],staticClass:"overlay-img cus-img",attrs:{alt:"course image"}})]),a("div",{staticClass:"media-body"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",[""!==s.level&&void 0!==s.level&&null!==s.level?a("span",{staticClass:"badge badge-pill badge-secondary"},[t._v(t._s(t.$t("level"))+" "+t._s(s.level))]):t._e(),""!==s.unit&&void 0!==s.unit?a("span",{staticClass:"badge badge-pill badge-secondary ml-2"},[t._v(t._s(t.$t("unit"))+" "+t._s(s.unit))]):t._e(),a("h4",{staticClass:"mb-0 mt-3 d-flex align-self-center text-primary"},[a("div",{attrs:{title:""}},[t._v(" "+t._s(s.resource_name)+" ")])]),a("p",{directives:[{name:"show",rawName:"v-show",value:0!==s.lastplay.length,expression:"cr.lastplay.length !== 0"}],staticClass:"text-muted mt-1"},[a("i",{staticClass:"zmdi zmdi-notifications mr-1"}),a("small",{staticClass:"fw300 pointer",on:{click:function(a){return t.showLastPlay(s.lastplay)}}},[t._v(t._s(t.$t("last-played"))+" ")])])]),a("div",{staticClass:"text-primary pointer",attrs:{"data-toggle":"modal","data-target":"#StartModal"},on:{click:function(a){t.getAvailableCourse(s.resourceid),t.tempNote=s.note}}},[t._v(" "+t._s(t.$t("start"))),t._m(0,!0)])])])])])])])})),0)])])],1),a("div",{staticClass:"modal fade",attrs:{id:"lastPlayModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[0!==t.lastPlayList.length?a("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("last-play-record-course-date"))+" ")]):a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("no-record")))]),t._m(1)]),0!==t.lastPlayList.length?a("div",{staticClass:"modal-body pb-4"},t._l(t.lastPlayList,(function(s){return a("div",{key:s.courseid+"lastplay"},[a("span",[t._v(t._s(s.course_name)+" ï¼š "+t._s(t._f("dateConversion")(s.last_access)))])])})),0):a("div",{staticClass:"modal-body pb-4"},[a("p",[t._v(t._s(t.$t("no-open-or-play-record"))+".")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"StartModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[0!==t.courseList.length?a("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("start"))+" ")]):a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("no-course")))]),t._m(2)]),0!==t.courseList.length?a("div",{staticClass:"modal-body pb-4"},[a("h5",[t._v(t._s(t.$t("what-is-your-ongoing-course"))+"?")]),a("p",[t._v(" "+t._s(t.$t("this-material-can-only-be-viewed-in-the-following-course"))+". ")]),t._l(t.courseList,(function(s){return a("a",{key:s.resourceid,staticClass:"btn btn-primary btn-outline btn-rounded mr-3 mb-3",attrs:{title:"","data-dismiss":"modal"},on:{click:function(a){return t.gotoCourse(s)}}},[t._v(t._s(s.course_name))])}))],2):a("div",{staticClass:"modal-body pb-4"},[a("p",[t._v(" "+t._s(t.$t("the-course-you-can-use-this-collection-has-expired-if-you-wish-to-continue-using-it-you-must-renew-your-contract"))+". ")])])])])])])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("a",{staticClass:"btn-rounded-icon btn-primary rounded ml-2"},[s("i",{staticClass:"zmdi zmdi-arrow-right zmdi-hc-fw text-white"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])}],!1,null,"3aa3ce38",null);s.default=c.exports},"5b90":function(t,s,a){"use strict";var e=a("f5aa");a.n(e).a},f5aa:function(t,s,a){}}]);
//# sourceMappingURL=chunk-0d716740.3d658f61.js.map