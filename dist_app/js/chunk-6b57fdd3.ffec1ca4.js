(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6b57fdd3"],{"1f6c":function(t,s,e){"use strict";e.d(s,"c",(function(){return i})),e.d(s,"d",(function(){return o})),e.d(s,"e",(function(){return n})),e.d(s,"b",(function(){return r})),e.d(s,"h",(function(){return c})),e.d(s,"f",(function(){return l})),e.d(s,"g",(function(){return d})),e.d(s,"a",(function(){return u}));var a=e("a95a");const i={get:()=>Object(a.b)("/tchr/list")},o={get:t=>Object(a.b)("/tchr/search/"+t)},n={post:t=>Object(a.d)("/tchr/invite",t)},r={get:t=>Object(a.b)("/tchr/profile/"+t)},c={get:(t,s)=>Object(a.b)(`/tchr/setstatus/${t}/${s}`)},l={post:(t,s)=>Object(a.d)("/tchr/modify/"+t,s)},d={post:(t,s)=>Object(a.d)("/tchr/resetpw/"+t,s)},u={get:t=>Object(a.b)("/tchr/avatar/"+t)}},"267b":function(t,s,e){"use strict";var a=e("b236");e.n(a).a},"77be":function(t,s,e){"use strict";e.r(s);var a=e("1f6c"),i={name:"Account",components:{CustomHeader:()=>Promise.resolve().then(e.bind(null,"339c"))},data:()=>({accountList:[],searchAccountName:"",accountInfo:{username:"",image:"0"},tempAccount:{username:"",email:""},tempPwdInfo:{oldpw:"",newpw:"",confirmpw:""},chooseimg:"0",accountShow:"information"}),computed:{image(){return this.$store.state.auth.image},userid(){return this.$store.state.auth.userid},userInfo(){return this.$store.state.auth}},mounted(){this.chooseimg=this.image,this.getAccoutList()},methods:{changeInfo(){this.chooseimg!==this.userInfo.image&&this.changeAvatar(),this.accountInfo.username!==this.userInfo.username&&this.setAccountInfo()},setAccountInfo(){console.log("change profile");let t=this;this.accountInfo.image=this.chooseimg,a.f.post(this.userid,this.accountInfo).then(s=>{console.log(s),"success"===s.status&&(t.$store.dispatch("auth/updateUserInfo",this.accountInfo),t.$bus.$emit("messsage:push","update success","success"),t.accountShow="information")}).catch(t=>{})},async changeAvatar(){await a.a.get(this.chooseimg).then(t=>{if("success"===t.status)return!0}).catch(t=>{})&&(console.log("update"),this.$store.dispatch("auth/setImg",this.chooseimg))},setAccountPWD(){this.$refs.resetForm.validate().then(t=>{t&&a.g.post(this.userid,this.tempPwdInfo).then(t=>{console.log(t),"success"===t.status?this.$bus.$emit("messsage:push","Change password successfully.","success"):(this.errorMessage=t.record,this.$bus.$emit("messsage:push",t.record,"danger"))}).catch(t=>{})})},async checkValid(){return this.$refs.accountForm.validate()},getAccoutList(){a.c.get().then(t=>{this.accountList=t.record}).catch(t=>{})},async sendInviteMail(){let t=await this.checkValid();console.log(t),t?a.e.post(this.tempAccount).then(t=>{console.log("api response = ",t),"success"===t.status?this.$bus.$emit("messsage:push","An email has been sent to teacher's email.","success"):this.$bus.$emit("messsage:push",t.record,"danger")}).catch(t=>{}):this.$bus.$emit("messsage:push","Wrong field content, please enter valid content","danger")},searchAccount(){let t=this.searchAccountName;""===this.searchAccountName&&(t="*"),a.d.get(t).then(t=>{this.accountList=t.record}).catch(t=>{})},gotoAccountDetail(t){this.$router.push({path:"/account/"+t})}}},o=(e("267b"),e("2877")),n=Object(o.a)(i,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"app3"}},[a("div",{},[a("custom-header"),a("div",{staticClass:"content"},[a("header",{staticClass:"page-header"},[a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"mr-auto"},[a("h1",[t._v(t._s(t.$t("account")))])])])]),"admin"===t.userInfo.permit?a("section",{staticClass:"page-content container-fluid pb-0"},[a("h1",[t._v("My account")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("table",{staticClass:"table table-striped",staticStyle:{width:"100%"}},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("my-name")))]),a("th",[t._v(t._s(t.$t("my-e-mail")))]),a("th",[t._v(t._s(t.$t("edit")))])])]),a("tbody",[a("tr",[a("td",[a("a",{staticClass:"pointer",attrs:{"data-toggle":"modal","data-target":"#changeInfo"},on:{click:function(s){t.accountInfo.username=t.userInfo.username}}},["1"===t.userInfo.image?a("img",{staticClass:"w-40 rounded-circle mr-3",attrs:{src:e("4968"),alt:"Albert Einstein"}}):t._e(),"2"===t.userInfo.image?a("img",{staticClass:"w-40 rounded-circle mr-3",attrs:{src:e("4550"),alt:"Albert Einstein"}}):t._e(),t._v(" "+t._s(t.userInfo.username)),a("i",{staticClass:"fas fa-edit ml-2 text-primary"})])]),a("td",[t._v(t._s(t.userInfo.email))]),a("td",[a("button",{staticClass:"btn btn-accent btn-rounded",attrs:{type:"button","data-toggle":"modal","data-target":"#ResetPasswordModal"}},[t._v(" "+t._s(t.$t("reset-password"))+" ")])])])])])])])])])]):t._e(),a("section",{staticClass:"page-content container-fluid pt-0"},[a("h1",[t._v("Teacher List")]),a("div",{staticClass:"d-flex justify-content-between mb-3"},[a("div",{staticClass:"form-group form-rounded mb-0"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchAccountName,expression:"searchAccountName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search..."},domProps:{value:t.searchAccountName},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.searchAccount()},input:function(s){s.target.composing||(t.searchAccountName=s.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("div",{staticClass:"btn btn-secondary btn-outline btn-icon btn-rounded",attrs:{type:"button"},on:{click:function(s){return t.searchAccount()}}},[a("i",{staticClass:"zmdi zmdi-search text-secondary"})])])])]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-primary btn-outline btn-rounded",attrs:{type:"button","data-toggle":"modal","data-target":"#AddTeacherModal"}},[a("i",{staticClass:"la la-plus"}),t._v(t._s(t.$t("add-teacher"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("table",{staticClass:"table table-striped",staticStyle:{width:"100%"}},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("name")))]),a("th",[t._v(t._s(t.$t("e-mail")))]),a("th",[t._v(t._s(t.$t("status")))])])]),a("tbody",t._l(t.accountList,(function(s){return a("tr",{key:s.userid},[a("td",[a("a",{staticClass:"pointer",on:{click:function(e){return t.gotoAccountDetail(s.userid)}}},["1"===s.image?a("img",{staticClass:"w-40 rounded-circle mr-3",attrs:{src:e("4968"),alt:"Albert Einstein"}}):t._e(),"2"===s.image?a("img",{staticClass:"w-40 rounded-circle mr-3",attrs:{src:e("4550"),alt:"Albert Einstein"}}):t._e(),t._v(" "+t._s(s.username))])]),a("td",[t._v(t._s(s.email))]),a("td",["enable"===s.status?a("span",{staticClass:"text-success"},[t._v(t._s(t.$t("active")))]):a("span",{staticClass:"text-danger"},[t._v(t._s(t.$t("suspended")))])])])})),0)]),a("div",{staticClass:"col-12"})])])])])])])],1),a("div",{staticClass:"modal fade",attrs:{id:"AddTeacherModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("add-teacher")))]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("h4",{staticClass:"text-center mb-4 mt-2"},[t._v(t._s(t.$t("add-teacher")))]),a("p",[t._v(" "+t._s(t.$t("enter-teachers-information-and-invite-teacher-to-register-account"))+" ")]),a("form",[a("ValidationObserver",{ref:"accountForm"},[a("ValidationProvider",{attrs:{rules:"required",name:"Name"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.failed,i=s.errors;return[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"control-label text-right col-3"},[t._v(t._s(t.$t("name")))]),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempAccount.username,expression:"tempAccount.username"}],staticClass:"form-control",attrs:{type:"text",placeholder:" Enter teacher's name",value:""},domProps:{value:t.tempAccount.username},on:{input:function(s){s.target.composing||t.$set(t.tempAccount,"username",s.target.value)}}})]),a("span",{staticClass:"col-3"}),e?a("span",{staticClass:"text-danger col-9"},[t._v(" "+t._s(i[0])+" ")]):t._e()])]}}])}),a("ValidationProvider",{attrs:{rules:"required",name:"E-mail"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.failed,i=s.errors;return[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"control-label text-right col-3"},[t._v(t._s(t.$t("e-mail")))]),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempAccount.email,expression:"tempAccount.email"}],staticClass:"form-control is-invalid",attrs:{type:"email",placeholder:" Enter teacher's E-mail",value:""},domProps:{value:t.tempAccount.email},on:{input:function(s){s.target.composing||t.$set(t.tempAccount,"email",s.target.value)}}})]),a("span",{staticClass:"col-3"}),e?a("span",{staticClass:"text-danger col-9"},[t._v(t._s(i[0]))]):t._e()])]}}])})],1)],1)]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal","data-toggle":"modal"},on:{click:function(s){return t.sendInviteMail()}}},[t._v(" "+t._s(t.$t("invite"))+" ")])])])])]),a("div",{staticClass:"modal modal-top-frame fade",attrs:{id:"InviteEmailSentModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"alert alert-success alert-dismissible fade show",attrs:{role:"alert"}},[t._v(" "+t._s(t.$t("an-email-has-been-sent-to-teachers-email"))+" "),t._m(1)])])]),a("div",{staticClass:"modal fade",attrs:{id:"ResetPasswordModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("reset-password")))]),t._m(2)]),a("ValidationObserver",{ref:"resetForm"},[a("div",{staticClass:"modal-body"},[a("form",[a("ValidationProvider",{attrs:{rules:"",name:"Current password"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.failed,i=s.errors;return[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"control-label text-right col-4"},[t._v(t._s(t.$t("current-password")))]),a("div",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempPwdInfo.oldpw,expression:"tempPwdInfo.oldpw"}],staticClass:"form-control",class:{"is-invalid":e},attrs:{type:"password",placeholder:"Enter your current password",value:""},domProps:{value:t.tempPwdInfo.oldpw},on:{input:function(s){s.target.composing||t.$set(t.tempPwdInfo,"oldpw",s.target.value)}}}),e?a("span",{staticClass:"text-danger"},[t._v(t._s(i[0]))]):t._e()]),a("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$t("current-password-is-incorrect"))+" ")])])]}}])}),a("ValidationProvider",{attrs:{rules:"required",name:"New password",vid:"confirmation"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.failed,i=s.errors;return[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"control-label text-right col-4"},[t._v(t._s(t.$t("new-password")))]),a("div",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempPwdInfo.newpw,expression:"tempPwdInfo.newpw"}],staticClass:"form-control is-invalid",class:{"is-invalid":e},attrs:{type:"password",placeholder:"Password must be at least 6 characters",value:""},domProps:{value:t.tempPwdInfo.newpw},on:{input:function(s){s.target.composing||t.$set(t.tempPwdInfo,"newpw",s.target.value)}}}),e?a("span",{staticClass:"text-danger"},[t._v(t._s(i[0]))]):t._e()]),a("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$t("passwords-are-inconsistent"))+". ")])])]}}])}),a("ValidationProvider",{attrs:{rules:"required|confirmed:confirmation",name:"Confirm password"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.failed,i=s.errors;return[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"control-label text-right col-4"},[t._v(t._s(t.$t("confirm-password")))]),a("div",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempPwdInfo.confirmpw,expression:"tempPwdInfo.confirmpw"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Enter your password again",value:""},domProps:{value:t.tempPwdInfo.confirmpw},on:{input:function(s){s.target.composing||t.$set(t.tempPwdInfo,"confirmpw",s.target.value)}}}),e?a("span",{staticClass:"text-danger"},[t._v(t._s(i[0]))]):t._e()])])]}}])})],1)]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"btn btn-accent btn-rounded",attrs:{type:"submit","data-dismiss":"modal"},on:{click:t.setAccountPWD}},[t._v(" "+t._s(t.$t("reset"))+" ")])])])],1)])]),a("div",{staticClass:"modal fade",attrs:{id:"changeInfo",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("edit-profile"))+" ")]),t._m(3)]),a("div",{staticClass:"modal-body pb-4"},[a("div",{staticClass:"form-group row m-t-20"},[a("label",{staticClass:"w-75 pl-3 col-form-label text-right"},[t._v(t._s(t.$t("name"))+"：")]),a("div",{staticClass:"col-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.accountInfo.username,expression:"accountInfo.username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"",value:""},domProps:{value:t.accountInfo.username},on:{input:function(s){s.target.composing||t.$set(t.accountInfo,"username",s.target.value)}}})])]),a("h5",[t._v(t._s(t.$t("choose-your-avatar")))]),a("div",{staticClass:"justify-content-start"},[a("div",{staticClass:"d-flex"},[a("img",{staticClass:"\n                  w-200\n                  rounded-circle\n                  img-thumbnail\n                  mr-5\n                  pointer\n                  bchover-blue\n                ",class:"1"===t.chooseimg?"bc-blue":"",attrs:{src:e("4968"),alt:"profile-image"},on:{click:function(s){t.chooseimg="1"}}}),a("img",{staticClass:"\n                  w-200\n                  rounded-circle\n                  img-thumbnail\n                  pointer\n                  bchover-blue\n                ",class:"2"===t.chooseimg?"bc-blue":"",attrs:{src:e("4550"),alt:"profile-image"},on:{click:function(s){t.chooseimg="2"}}})])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("close"))+" ")]),a("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return t.changeInfo()}}},[t._v(" "+t._s(t.$t("save-changes"))+" ")])])])])])])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[s("span",{staticClass:"la la-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])}],!1,null,"e782e93a",null);s.default=n.exports},b236:function(t,s,e){}}]);
//# sourceMappingURL=chunk-6b57fdd3.ffec1ca4.js.map