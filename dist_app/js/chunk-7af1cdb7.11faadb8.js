(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7af1cdb7"],{"83cb":function(t,s,e){"use strict";e.d(s,"d",(function(){return i})),e.d(s,"e",(function(){return l})),e.d(s,"f",(function(){return n})),e.d(s,"j",(function(){return d})),e.d(s,"g",(function(){return c})),e.d(s,"k",(function(){return o})),e.d(s,"a",(function(){return r})),e.d(s,"l",(function(){return m})),e.d(s,"c",(function(){return u})),e.d(s,"i",(function(){return g})),e.d(s,"b",(function(){return p})),e.d(s,"h",(function(){return h}));var a=e("a95a");const i={get:(t,s)=>Object(a.b)(`/asgmt/getlist/${t}/${s}`)},l={get:t=>(console.log(t),Object(a.b)("/asgmt/material/"+t))},n={get:t=>Object(a.b)("/asgmt/progress/"+t)},d={post:(t,s,e)=>Object(a.d)(`/asgmt/evaluate/${t}/${s}`,e)},c={get:t=>Object(a.a)("/asgmt/play/voice/"+t)},o={get:(t,s,e,i)=>Object(a.b)(`/asgmt/score/${t}/${s}/${e}/${i}`)},r={post:(t,s)=>Object(a.d)("/asgmt/checkall/"+t,s)},m={getAxiosAll:(t,s)=>Promise.all(s.map(s=>Object(a.b)(`/asgmt/uncheck/${t}/${s}`)))},u={get:(t,s)=>(console.log("std = ",s),Object(a.b)(`/asgmt/detail/${t}/${s}`))},g={get:(t,s,e)=>Object(a.b)(`/asgmt/search/${t}/${s}/${e}`)},p={getAxiosAll:t=>Promise.all(t.map(t=>Object(a.b)("/asgmt/delete/"+t)))},h={post:(t,s)=>Object(a.d)("/asgmt/modify/"+t,s)}},ea2b:function(t,s,e){"use strict";e.r(s);var a=e("83cb"),i=e("5a0c"),l=e.n(i),n=e("c707"),d=e.n(n),c={name:"CourseAssignment",components:{CourseHeader:()=>Promise.all([e.e("npm.vue2-datepicker"),e.e("npm.date-fns"),e.e("chunk-fb52d430")]).then(e.bind(null,"3ed2"))},data(){return{courseid:this.$route.params.courseid,aList:[],aMaterial:[],tempAM:{},tempAid:"",selectAllA:"",selectedAssignment:[],sortStatus:!1,tempSortItem:"",modifyName:"",expired:this.$route.params.expired}},created(){this.$store.dispatch("common/setLoading",!0),this.getAList()},mounted(){this.$store.dispatch("common/setLoading",!1)},computed:{},watch:{courseid(){this.reload()}},methods:{calexpired(t){let s=new Date;s.setHours(0,0,0,0);let e=l()(s).subtract(1,"day");return l()(l()(e).format("YYYY-MM-DD")).isBefore(l()(l.a.unix(t).format("YYYY-MM-DD")))?"":"text-danger"},async ModifyAssignmentName(){let t={description:this.modifyName};console.log(t),await a.h.post(this.tempAid,t).then(t=>{if("success"===t.status)return!0;this.$bus.$emit("messsage:push",t.record,"danger")}).catch(t=>{})&&(this.$bus.$emit("messsage:push","Modify Success.","success"),this.getAList())},sortTable(t){this.tempSortItem===t?this.aList=this.aList.reverse():(this.tempSortItem=t,this.aList=d()(this.aList,[s=>s[t]],["asc"]))},calexpired(t){let s=new Date;s.setHours(0,0,0,0);let e=l()(s).subtract(1,"day");return l()(l()(e).format("YYYY-MM-DD")).isBefore(l()(l.a.unix(t).format("YYYY-MM-DD")))?"":"text-danger"},selectAll(t){const s=this;t.currentTarget.checked?(s.selectedAssignment=[],s.aList.forEach((function(t,e){s.selectedAssignment.push(t.asgmtid)}))):s.selectedAssignment=[]},getAList(){this.aList=[],a.d.get(this.courseid,this.userid).then(t=>{this.aList=t.record}).catch(t=>{})},getAMaterial(t){console.log(t),a.e.get(t).then(t=>{console.log(t.record),this.aMaterial=t.record}).catch(t=>{})},gotoProgress(t,s=""){this.$router.push({path:`/check_assignment/course=${this.$route.params.course}/type=${this.$route.params.type}/${this.$route.params.courseid}/${t}/${s}`})},deleteAssignmentAll(){a.b.getAxiosAll(this.selectedAssignment).then(t=>{this.selectedAssignment=[],this.getAList(),this.$bus.$emit("messsage:push","Delete completed.","success")}).catch(t=>{})}}},o=e("2877"),r=Object(o.a)(c,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app2 "}},[e("div",{staticClass:"main-content"},[e("div",{staticClass:"content page-aside-left"},[e("div",{staticClass:"main-content"},[e("course-header"),e("div",{staticClass:"page-content container-fluid"},[e("div",{staticClass:"d-flex justify-content-end mb-3"},["expired"!==t.$route.params.expired?e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-primary btn-outline btn-rounded",attrs:{type:"button","data-toggle":"modal","data-target":"#DeleteAModal",disabled:0===t.selectedAssignment.length}},[e("i",{staticClass:"la la-trash"}),t._v(" "+t._s(t.$t("delete-assignment"))+" "),0!==t.selectedAssignment.length?e("span",{staticClass:"badge badge-danger"},[t._v(t._s(t.selectedAssignment.length))]):t._e()])]):t._e()]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-striped"},[e("thead",[e("tr",["expired"!==t.$route.params.expired?e("th",[e("div",{staticClass:"\n                                custom-control custom-checkbox\n                                form-check\n                              "},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAllA,expression:"selectAllA"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customCheck"},domProps:{checked:Array.isArray(t.selectAllA)?t._i(t.selectAllA,null)>-1:t.selectAllA},on:{click:t.selectAll,change:function(s){var e=t.selectAllA,a=s.target,i=!!a.checked;if(Array.isArray(e)){var l=t._i(e,null);a.checked?l<0&&(t.selectAllA=e.concat([null])):l>-1&&(t.selectAllA=e.slice(0,l).concat(e.slice(l+1)))}else t.selectAllA=i}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"customCheck"}})])]):t._e(),e("th",[e("span",{staticClass:"pointer",on:{click:function(s){return t.sortTable("description")}}},[t._v(t._s(t.$t("assignment"))),e("i",{staticClass:"\n                                  zmdi zmdi-swap-vertical\n                                  ml-1\n                                  zmdi-hc-lg\n                                "})])]),e("th",{staticClass:"pointer",on:{click:function(s){return t.sortTable("publish_date")}}},[t._v(" "+t._s(t.$t("assignment-period"))+" "),e("i",{staticClass:"zmdi zmdi-swap-vertical ml-1 zmdi-hc-lg"})]),e("th",[t._v(t._s(t.$t("assigned-students")))]),e("th",[t._v(t._s(t.$t("students-completed")))]),e("th",{staticClass:"pointer",on:{click:function(s){return t.sortTable("difficult_level")}}},[t._v(" "+t._s(t.$t("levels-of-difficulty"))+" "),e("i",{staticClass:"zmdi zmdi-swap-vertical zmdi-hc-lg ml-1"})]),e("th",[t._v(t._s(t.$t("preview")))]),e("th",[t._v(t._s(t.$t("check-progress")))])])]),e("tbody",[t._l(t.aList,(function(s){return e("tr",{key:s.asgmtid},["expired"!==t.$route.params.expired?e("td",[e("div",{staticClass:"\n                                custom-control custom-checkbox\n                                form-check\n                              "},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedAssignment,expression:"selectedAssignment"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:s.asgmtid},domProps:{value:s.asgmtid,checked:Array.isArray(t.selectedAssignment)?t._i(t.selectedAssignment,s.asgmtid)>-1:t.selectedAssignment},on:{change:function(e){var a=t.selectedAssignment,i=e.target,l=!!i.checked;if(Array.isArray(a)){var n=s.asgmtid,d=t._i(a,n);i.checked?d<0&&(t.selectedAssignment=a.concat([n])):d>-1&&(t.selectedAssignment=a.slice(0,d).concat(a.slice(d+1)))}else t.selectedAssignment=l}}}),e("label",{staticClass:"custom-control-label",attrs:{for:s.asgmtid}})])]):t._e(),e("td",{},[e("span",[t._v(t._s(s.description))]),"expired"!==t.$route.params.expired?e("span",{staticClass:"ml-1 pointer",attrs:{"data-toggle":"modal","data-target":"#editModal"},on:{click:function(e){t.tempAM=s,t.modifyName="",t.tempAid=s.asgmtid}}},[e("i",{staticClass:"zmdi zmdi-edit ml-1 zmdi-hc-lg"})]):t._e()]),e("td",{class:t.calexpired(s.expiry_date)},[t._v(" "+t._s(t._f("dateConversion")(s.publish_date))+" - "+t._s(t._f("dateConversion")(s.expiry_date))+" ")]),e("td",[t._v(t._s(s.target))]),e("td",[t._v(t._s(s.completedStu)+" Ôºè"+t._s(s.totalStu))]),e("td",[t._v(t._s(s.difficult_level))]),e("td",[e("button",{staticClass:"btn btn-nostyle",attrs:{type:"","data-toggle":"modal","data-target":"#PreviewModel"},on:{click:function(e){t.getAMaterial(s.asgmtid),t.tempAM=s}}},[e("i",{staticClass:"la la-eye"})])]),e("td",[e("a",{staticClass:"\n                                btn btn-primary btn-sm btn-rounded\n                                text-white\n                              ",on:{click:function(e){return t.gotoProgress(s.asgmtid,t.expired)}}},[t._v(t._s(t.$t("view")))])])])})),0===t.aList.length?e("tr",[e("td",{staticClass:"text-center",attrs:{colspan:"9"}},[e("h5",[t._v(" "+t._s(t.$t("no-assignment"))+" ")])])]):t._e()],2)])])])])])])])],1)])]),e("div",{staticClass:"modal fade",attrs:{id:"PreviewModel",tabindex:"-1",role:"dialog","aria-hidden":"true","data-modal":"scroll"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("list-preview")))]),t._m(0)]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"mb-3"},[e("div",{staticClass:"row pb-2 pt-2"},[e("div",{staticClass:"col-3 text-right fw-400 fs-h6 xstitie-color"},[t._v(" "+t._s(t.$t("date"))+" ")]),e("div",{staticClass:"col-9"},[t._v(" "+t._s(t._f("dateConversion")(t.tempAM.publish_date))+" - "+t._s(t._f("dateConversion")(t.tempAM.expiry_date))+" ")])]),e("div",{staticClass:"row pb-2"},[e("div",{staticClass:"col-3 text-right fw-400 fs-h6 xstitie-color"},[t._v(" "+t._s(t.$t("students"))+" ")]),e("div",{staticClass:"col-9"},[t._v(t._s(t.tempAM.target))])])]),e("div",{staticClass:"bg-light rounded"},[e("ul",{staticClass:"sequence"},t._l(t.aMaterial,(function(s){return e("li",{key:s.publish_date+s.resource_name,staticClass:"border bg-white rounded"},[e("div",{staticClass:"mr-3"},["reading"===s.type?e("span",{staticClass:"badge badge-pill badge-primary"},[t._v(t._s(t.$t("reading")))]):"speaking"===s.type?e("span",{staticClass:"badge badge-pill badge-accent"},[t._v(t._s(t.$t("speaking-quiz")))]):e("span",{staticClass:"badge badge-pill badge-warning"},[t._v(t._s(t.$t("watching")))]),t._v(" "+t._s(s.resource_name)),e("span",{directives:[{name:"show",rawName:"v-show",value:""!==s.material_name,expression:"am.material_name !== ''"}]},[t._v(" - "+t._s(s.material_name))])])])})),0)])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("close"))+" ")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"DeleteAModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"ModalTitle1"}},[t._v(" "+t._s(t.$t("delete-assignment"))+" ")]),t._m(1)]),e("div",{staticClass:"modal-body"},[e("p",[t._v(" "+t._s(t.$t("are-you-sure-you-want-to-delete-this-assignment-all-student-progress-will-be-lost"))+" ")])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return t.deleteAssignmentAll()}}},[t._v(" "+t._s(t.$t("confirm"))+" ")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"editModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"ModalTitle1"}},[t._v(" "+t._s(t.$t("modify"))+" ")]),t._m(2)]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"mb-3"},[e("div",{staticClass:"row pb-2 pt-2"},[e("div",{staticClass:"col-4 text-right fw-400 fs-h6 xstitie-color"},[t._v(" "+t._s(t.$t("current-name"))+" ")]),e("div",{staticClass:"col-8"},[t._v(" "+t._s(t.tempAM.description)+" ")])]),e("div",{staticClass:"row pb-2 pt-2"},[e("div",{staticClass:"col-4 text-right fw-400 fs-h6 xstitie-color"},[t._v(" "+t._s(t.$t("changed-name"))+" ")]),e("div",{staticClass:"col-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modifyName,expression:"modifyName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Assignment name",value:"modifyName"},domProps:{value:t.modifyName},on:{input:function(s){s.target.composing||(t.modifyName=s.target.value)}}})])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return t.ModifyAssignmentName()}}},[t._v(" "+t._s(t.$t("confirm"))+" ")])])])])])])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-Cancel",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])}],!1,null,"7f364f6d",null);s.default=r.exports}}]);
//# sourceMappingURL=chunk-7af1cdb7.11faadb8.js.map