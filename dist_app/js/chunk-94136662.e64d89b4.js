(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-94136662"],{"1f6c":function(t,s,a){"use strict";a.d(s,"c",(function(){return o})),a.d(s,"d",(function(){return i})),a.d(s,"e",(function(){return n})),a.d(s,"b",(function(){return r})),a.d(s,"h",(function(){return c})),a.d(s,"f",(function(){return l})),a.d(s,"g",(function(){return d})),a.d(s,"a",(function(){return u}));var e=a("a95a");const o={get:()=>Object(e.b)("/tchr/list")},i={get:t=>Object(e.b)("/tchr/search/"+t)},n={post:t=>Object(e.d)("/tchr/invite",t)},r={get:t=>Object(e.b)("/tchr/profile/"+t)},c={get:(t,s)=>Object(e.b)(`/tchr/setstatus/${t}/${s}`)},l={post:(t,s)=>Object(e.d)("/tchr/modify/"+t,s)},d={post:(t,s)=>Object(e.d)("/tchr/resetpw/"+t,s)},u={get:t=>Object(e.b)("/tchr/avatar/"+t)}},4138:function(t,s,a){},"77be":function(t,s,a){"use strict";a.r(s);var e=a("1f6c"),o={name:"Account",components:{CustomHeader:()=>Promise.resolve().then(a.bind(null,"339c"))},data:()=>({accountList:[],searchAccountName:"",accountInfo:{username:"",image:"0"},tempAccount:{username:"",email:""},tempPwdInfo:{oldpw:"",newpw:"",confirmpw:""},chooseimg:"0",accountShow:"information"}),computed:{image(){return this.$store.state.auth.image},userid(){return this.$store.state.auth.userid},userInfo(){return this.$store.state.auth}},mounted(){this.chooseimg=this.image,this.getAccoutList()},methods:{changeInfo(){this.chooseimg!==this.userInfo.image&&this.changeAvatar(),this.accountInfo.username!==this.userInfo.username&&this.setAccountInfo()},setAccountInfo(){console.log("change profile");let t=this;this.accountInfo.image=this.chooseimg,e.f.post(this.userid,this.accountInfo).then(s=>{console.log(s),"success"===s.status&&(t.$store.dispatch("auth/updateUserInfo",this.accountInfo),t.$bus.$emit("messsage:push","update success","success"),t.accountShow="information")}).catch(t=>{})},async changeAvatar(){await e.a.get(this.chooseimg).then(t=>{if("success"===t.status)return!0}).catch(t=>{})&&(console.log("update"),this.$store.dispatch("auth/setImg",this.chooseimg))},setAccountPWD(){this.$refs.resetForm.validate().then(t=>{t&&e.g.post(this.userid,this.tempPwdInfo).then(t=>{console.log(t),"success"===t.status?(this.resetpwStatus=!0,$("#ResetPasswordModal").modal("hide"),$("#PasswordResetSuccessModal").modal("show")):(this.resetpwStatus=!1,this.errorMessage=t.record,$("#ResetPasswordModal").modal("hide"),$("#PasswordResetSuccessModal").modal("show"))}).catch(t=>{})})},async checkValid(){return this.$refs.accountForm.validate()},getAccoutList(){e.c.get().then(t=>{this.accountList=t.record}).catch(t=>{})},async sendInviteMail(){await this.checkValid()&&e.e.post(this.tempAccount).then(t=>{console.log("api response = ",t),"success"===t.status&&this.$bus.$emit("messsage:push","An email has been sent to teacher's email.","success")}).catch(t=>{})},searchAccount(){let t=this.searchAccountName;""===this.searchAccountName&&(t="*"),e.d.get(t).then(t=>{this.accountList=t.record}).catch(t=>{})},gotoAccountDetail(t){this.$router.push({path:"/account/"+t})}}},i=(a("f808"),a("2877")),n=Object(i.a)(o,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app3"}},[e("div",{},[e("custom-header"),e("div",{staticClass:"content"},[e("header",{staticClass:"page-header"},[e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"mr-auto"},[e("h1",[t._v(t._s(t.$t("account")))])])])]),"admin"===t.userInfo.permit?e("section",{staticClass:"page-content container-fluid pb-0"},[e("h1",[t._v("My account")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("table",{staticClass:"table table-striped",staticStyle:{width:"100%"}},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("my-name")))]),e("th",[t._v(t._s(t.$t("my-e-mail")))]),e("th",[t._v(t._s(t.$t("edit")))])])]),e("tbody",[e("tr",[e("td",[e("a",{staticClass:"pointer",attrs:{"data-toggle":"modal","data-target":"#changeInfo"},on:{click:function(s){t.accountInfo.username=t.userInfo.username}}},["1"===t.userInfo.image?e("img",{staticClass:"w-40 rounded-circle mr-3",attrs:{src:a("4968"),alt:"Albert Einstein"}}):t._e(),"2"===t.userInfo.image?e("img",{staticClass:"w-40 rounded-circle mr-3",attrs:{src:a("4550"),alt:"Albert Einstein"}}):t._e(),t._v(" "+t._s(t.userInfo.username)),e("i",{staticClass:"fas fa-edit ml-2 text-primary"})])]),e("td",[t._v(t._s(t.userInfo.email))]),e("td",[e("button",{staticClass:"btn btn-accent btn-rounded",attrs:{type:"button","data-toggle":"modal","data-target":"#ResetPasswordModal"}},[t._v(" "+t._s(t.$t("reset-password"))+" ")])])])])])])])])])]):t._e(),e("section",{staticClass:"page-content container-fluid pt-0"},[e("h1",[t._v("Teacher List")]),e("div",{staticClass:"d-flex justify-content-between mb-3"},[e("div",{staticClass:"form-group form-rounded mb-0"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchAccountName,expression:"searchAccountName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search..."},domProps:{value:t.searchAccountName},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.searchAccount()},input:function(s){s.target.composing||(t.searchAccountName=s.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("div",{staticClass:"btn btn-secondary btn-outline btn-icon btn-rounded",attrs:{type:"button"},on:{click:function(s){return t.searchAccount()}}},[e("i",{staticClass:"zmdi zmdi-search text-secondary"})])])])]),e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-primary btn-outline btn-rounded",attrs:{type:"button","data-toggle":"modal","data-target":"#AddTeacherModal"}},[e("i",{staticClass:"la la-plus"}),t._v(t._s(t.$t("add-teacher"))+" ")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("table",{staticClass:"table table-striped",staticStyle:{width:"100%"}},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("name")))]),e("th",[t._v(t._s(t.$t("e-mail")))]),e("th",[t._v(t._s(t.$t("status")))])])]),e("tbody",t._l(t.accountList,(function(s){return e("tr",{key:s.userid},[e("td",[e("a",{staticClass:"pointer",on:{click:function(a){return t.gotoAccountDetail(s.userid)}}},["1"===s.image?e("img",{staticClass:"w-40 rounded-circle mr-3",attrs:{src:a("4968"),alt:"Albert Einstein"}}):t._e(),"2"===s.image?e("img",{staticClass:"w-40 rounded-circle mr-3",attrs:{src:a("4550"),alt:"Albert Einstein"}}):t._e(),t._v(" "+t._s(s.username))])]),e("td",[t._v(t._s(s.email))]),e("td",["enable"===s.status?e("span",{staticClass:"text-success"},[t._v(t._s(t.$t("active")))]):e("span",{staticClass:"text-danger"},[t._v(t._s(t.$t("suspended")))])])])})),0)]),e("div",{staticClass:"col-12"})])])])])])])],1),e("div",{staticClass:"modal fade",attrs:{id:"AddTeacherModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("add-teacher")))]),t._m(0)]),e("div",{staticClass:"modal-body"},[e("h4",{staticClass:"text-center mb-4 mt-2"},[t._v(t._s(t.$t("add-teacher")))]),e("p",[t._v(" "+t._s(t.$t("enter-teachers-information-and-invite-teacher-to-register-account"))+" ")]),e("form",[e("ValidationObserver",{ref:"accountForm"},[e("ValidationProvider",{attrs:{rules:"required",name:"Name"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.failed,o=s.errors;return[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"control-label text-right col-3"},[t._v(t._s(t.$t("name")))]),e("div",{staticClass:"col-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempAccount.username,expression:"tempAccount.username"}],staticClass:"form-control",attrs:{type:"text",placeholder:" Enter teacher's name",value:""},domProps:{value:t.tempAccount.username},on:{input:function(s){s.target.composing||t.$set(t.tempAccount,"username",s.target.value)}}})]),e("span",{staticClass:"col-3"}),a?e("span",{staticClass:"text-danger col-9"},[t._v(" "+t._s(o[0])+" ")]):t._e()])]}}])}),e("ValidationProvider",{attrs:{rules:"required",name:"E-mail"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.failed,o=s.errors;return[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"control-label text-right col-3"},[t._v(t._s(t.$t("e-mail")))]),e("div",{staticClass:"col-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempAccount.email,expression:"tempAccount.email"}],staticClass:"form-control is-invalid",attrs:{type:"email",placeholder:" Enter teacher's E-mail",value:""},domProps:{value:t.tempAccount.email},on:{input:function(s){s.target.composing||t.$set(t.tempAccount,"email",s.target.value)}}})]),e("span",{staticClass:"col-3"}),a?e("span",{staticClass:"text-danger col-9"},[t._v(t._s(o[0]))]):t._e()])]}}])})],1)],1)]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal","data-toggle":"modal"},on:{click:function(s){return t.sendInviteMail()}}},[t._v(" "+t._s(t.$t("invite"))+" ")])])])])]),e("div",{staticClass:"modal modal-top-frame fade",attrs:{id:"InviteEmailSentModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"alert alert-success alert-dismissible fade show",attrs:{role:"alert"}},[t._v(" "+t._s(t.$t("an-email-has-been-sent-to-teachers-email"))+" "),t._m(1)])])]),e("div",{staticClass:"modal fade",attrs:{id:"ResetPasswordModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("reset-password")))]),t._m(2)]),e("ValidationObserver",{ref:"resetForm"},[e("div",{staticClass:"modal-body"},[e("form",[e("ValidationProvider",{attrs:{rules:"required|min:6",name:"Current password"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.failed,o=s.errors;return[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"control-label text-right col-4"},[t._v(t._s(t.$t("current-password")))]),e("div",{staticClass:"col-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempPwdInfo.oldpw,expression:"tempPwdInfo.oldpw"}],staticClass:"form-control",class:{"is-invalid":a},attrs:{type:"password",placeholder:"Enter your current password",value:""},domProps:{value:t.tempPwdInfo.oldpw},on:{input:function(s){s.target.composing||t.$set(t.tempPwdInfo,"oldpw",s.target.value)}}}),a?e("span",{staticClass:"text-danger"},[t._v(t._s(o[0]))]):t._e()]),e("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$t("current-password-is-incorrect"))+" ")])])]}}])}),e("ValidationProvider",{attrs:{rules:"required",name:"New password",vid:"confirmation"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.failed,o=s.errors;return[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"control-label text-right col-4"},[t._v(t._s(t.$t("new-password")))]),e("div",{staticClass:"col-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempPwdInfo.newpw,expression:"tempPwdInfo.newpw"}],staticClass:"form-control is-invalid",class:{"is-invalid":a},attrs:{type:"password",placeholder:"Password must be at least 6 characters",value:""},domProps:{value:t.tempPwdInfo.newpw},on:{input:function(s){s.target.composing||t.$set(t.tempPwdInfo,"newpw",s.target.value)}}}),a?e("span",{staticClass:"text-danger"},[t._v(t._s(o[0]))]):t._e()]),e("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$t("passwords-are-inconsistent"))+". ")])])]}}])}),e("ValidationProvider",{attrs:{rules:"required|confirmed:confirmation",name:"Confirm password"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.failed,o=s.errors;return[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"control-label text-right col-4"},[t._v(t._s(t.$t("confirm-password")))]),e("div",{staticClass:"col-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempPwdInfo.confirmpw,expression:"tempPwdInfo.confirmpw"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Enter your password again",value:""},domProps:{value:t.tempPwdInfo.confirmpw},on:{input:function(s){s.target.composing||t.$set(t.tempPwdInfo,"confirmpw",s.target.value)}}}),a?e("span",{staticClass:"text-danger"},[t._v(t._s(o[0]))]):t._e()])])]}}])})],1)]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),e("button",{staticClass:"btn btn-accent btn-rounded",attrs:{type:"submit"},on:{click:t.setAccountPWD}},[t._v(" "+t._s(t.$t("reset"))+" ")])])])],1)])]),e("div",{staticClass:"modal fade",attrs:{id:"changeInfo",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("edit-profile"))+" ")]),t._m(3)]),e("div",{staticClass:"modal-body pb-4"},[e("div",{staticClass:"form-group row m-t-20"},[e("label",{staticClass:"w-75 pl-3 col-form-label text-right"},[t._v(t._s(t.$t("name"))+"：")]),e("div",{staticClass:"col-10"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.accountInfo.username,expression:"accountInfo.username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"",value:""},domProps:{value:t.accountInfo.username},on:{input:function(s){s.target.composing||t.$set(t.accountInfo,"username",s.target.value)}}})])]),e("h5",[t._v(t._s(t.$t("choose-your-avatar")))]),e("div",{staticClass:"justify-content-start"},[e("div",{staticClass:"d-flex"},[e("img",{staticClass:"w-200 rounded-circle img-thumbnail mr-5 pointer bchover-blue",class:"1"===t.chooseimg?"bc-blue":"",attrs:{src:a("4968"),alt:"profile-image"},on:{click:function(s){t.chooseimg="1"}}}),e("img",{staticClass:"w-200 rounded-circle img-thumbnail pointer bchover-blue",class:"2"===t.chooseimg?"bc-blue":"",attrs:{src:a("4550"),alt:"profile-image"},on:{click:function(s){t.chooseimg="2"}}})])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("close"))+" ")]),e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return t.changeInfo()}}},[t._v(" "+t._s(t.$t("save-changes"))+" ")])])])])])])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[s("span",{staticClass:"la la-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])}],!1,null,"0806fe7a",null);s.default=n.exports},f808:function(t,s,a){"use strict";var e=a("4138");a.n(e).a}}]);
//# sourceMappingURL=chunk-94136662.e64d89b4.js.map