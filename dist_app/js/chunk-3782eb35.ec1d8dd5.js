(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3782eb35"],{"58ba":function(t,s,e){"use strict";e.d(s,"a",(function(){return d})),e.d(s,"c",(function(){return i})),e.d(s,"d",(function(){return o})),e.d(s,"e",(function(){return r})),e.d(s,"f",(function(){return n})),e.d(s,"b",(function(){return l}));var a=e("a95a");const d={get:(t,s,e)=>"admin"===t?void 0===e||""===e?Object(a.b)("/course/list/active/"+s):Object(a.b)(`/course/list/active/${s}?filter=${e}`):(console.log("/course/list/active/"+e),Object(a.b)("/course/list/active/"+e))},i={get:(t,s,e)=>"admin"===t?void 0===e||""===e?Object(a.b)("/course/list/expired/"+s):Object(a.b)(`/course/list/expired/${s}?filter=${e}`):(console.log(e),Object(a.b)("/course/list/expired/"+e))},o={get:()=>Object(a.b)("/course/teacherlist")},r={post:(t,s)=>Object(a.d)("/course/search/"+t,s)},n={put:(t,s)=>Object(a.e)("/course/setinfo/"+t,s)},l={get:()=>Object(a.b)("/course/list/all")}},b349:function(t,s,e){"use strict";e.r(s);var a=e("3ed9"),d=e("58ba"),i=e("92c3"),o=e.n(i),r=(e("1e3f"),e("1157")),n=e.n(r),l={name:"AddStudent",data:()=>({newStudent:{name:"",phone:""},dropzoneOptions:{url:"https://httpbin.org/post",thumbnailWidth:200,addRemoveLinks:!0,maxFilesize:5,maxFiles:1,chunking:!0,chunkSize:400},files:{},courseList:[],seleceCourse:"",courseStudentList:[],dupStudentList:[],showErrorMessage:!1,errorMessage:"",showAlreadyExist:!1,alreadyStudendList:[],stdExist:!1}),props:["courseid"],components:{vueDropzone:o.a},mounted(){this.getAllCourse()},methods:{async copySList(t){await a.b.get(t,this.courseid).then(t=>{if(this.dupStudentList=t.duplicateList,"success"===t.status)return!0}).catch(t=>{})&&0===this.dupStudentList.length&&(n()("#CopyModal").modal("hide"),this.$bus.$emit("messsage:push","Copy Student Success.","success"),this.$emit("childemit"))},getStudentInfo(t){a.f.get(t).then(t=>{this.courseStudentList=t.record}).catch(t=>{})},getAllCourse(){d.b.get().then(t=>{this.courseList=t.record.map(t=>({id:t.courseid,text:t.course_name}))}).catch(t=>{})},resetStdTemp(){this.newStudent={name:"",phone:""},this.filles={},this.showErrorMessage=!1,this.errorMessage="",this.showAlreadyExist=!1,this.alreadyStudendList=[],this.dupStudentList=[],this.$nextTick(()=>this.$refs.addStdForm.reset())},async addStudent(){if(await this.$refs.addStdForm.validate().then(t=>{if(console.log(t),t)return n()("#SingleStudentModal").modal("hide"),!0})){await a.a.post(this.courseid,this.newStudent).then(t=>{if("Student already exists"===t.record?this.stdExist=!0:this.stdExist=!1,"success"===t.status)return!0}).catch(t=>{console.log(t)})?(this.$bus.$emit("messsage:push","Add Student Success.","success"),this.$store.dispatch("courseInfo/updateStudent",this.courseid),this.$emit("childemit")):n()("#AlreadyExistsModal").modal("show")}},downloadSample(){a.d.get().then(t=>{var s=window.URL.createObjectURL(new Blob([t])),e=document.createElement("a");e.href=s,e.setAttribute("target","_blank"),e.setAttribute("download","Sample.csv"),document.body.appendChild(e),e.click()}).catch(t=>{})},uploadComplete(t){this.files=t},async importStdFile(){const t=new FormData;t.append("stulist",this.files),await a.h.post(this.courseid,t).then(t=>{if(void 0!==t.record.error&&t.record.error.length>0&&(this.showAlreadyExist=!0,this.alreadyStudendList=t.record.error),"success"===t.status)return!0;"failed"===t.status&&"'utf-8' codec can't decode byte 0xa4 in position 23: invalid start byte"===t.record?(this.showErrorMessage=!0,this.errorMessage="CSV file should be encoded in UTF-8 or modify sample file to upload."):(this.showErrorMessage=!0,this.errorMessage=t.record)}).catch(t=>{console.log(t)})?this.showAlreadyExist||(this.$store.dispatch("courseInfo/updateStudent",this.courseid),this.showErrorMessage=!1,this.errorMessage="",this.$refs.myVueDropzone.removeAllFiles(),this.alreadyStudendList=[],n()("#ImportCSVModal").modal("hide"),this.$bus.$emit("messsage:push","New Student Success.","success"),this.$emit("childemit")):this.showErrorMessage=!0}}},c=e("2877"),u=Object(c.a)(l,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"modal fade",attrs:{id:"AddStudentModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("add-student")))]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(s){t.errorMessage=""}}},[e("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"addstudent d-flex justify-content-center"},[e("div",[e("button",{staticClass:"btn btn-primary text-center",attrs:{"data-dismiss":"modal","data-toggle":"modal","data-target":"#SingleStudentModal"}},[t._m(0),e("div",{staticClass:"mt-3"},[t._v(t._s(t.$t("add-a-new-student")))])])]),e("div",[e("button",{staticClass:"btn btn-primary text-center",attrs:{"data-dismiss":"modal","data-toggle":"modal","data-target":"#ImportCSVModal"},on:{click:function(s){t.errorMessage=""}}},[t._m(1),e("div",{staticClass:"mt-3"},[t._v(t._s(t.$t("import-csv")))])])])])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"SingleStudentModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("add-student")))]),t._m(2)]),e("div",{staticClass:"modal-body"},[e("h4",{staticClass:"text-center mb-4 mt-2"},[t._v(" "+t._s(t.$t("add-a-new-student"))+" ")]),e("form",[e("ValidationObserver",{ref:"addStdForm"},[e("ValidationProvider",{attrs:{rules:"required",name:"Studend name"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.failed,d=s.errors;return[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"control-label text-right col-sm-4"},[t._v(t._s(t.$t("student-name")))]),e("div",{staticClass:"col-sm-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newStudent.name,expression:"newStudent.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter student name",value:""},domProps:{value:t.newStudent.name},on:{input:function(s){s.target.composing||t.$set(t.newStudent,"name",s.target.value)}}}),e("span",{directives:[{name:"show",rawName:"v-show",value:a,expression:"failed"}],staticClass:"text-danger"},[t._v(t._s(d[0]))])]),e("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$t("the-student-is-already-exists"))+". ")])])]}}])}),e("ValidationProvider",{attrs:{rules:"required",name:"Parents'phone number"},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.failed,d=s.errors;return[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"control-label text-right col-sm-4"},[t._v(t._s(t.$t("parents-phone-number")))]),e("div",{staticClass:"col-sm-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newStudent.phone,expression:"newStudent.phone"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter unique number",value:""},domProps:{value:t.newStudent.phone},on:{input:function(s){s.target.composing||t.$set(t.newStudent,"phone",s.target.value)}}}),e("span",{directives:[{name:"show",rawName:"v-show",value:a,expression:"failed"}],staticClass:"text-danger"},[t._v(t._s(d[0]))])]),e("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$t("the-phone-number-is-already-exists"))+". ")])])]}}])})],1)],1)]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button"},on:{click:function(s){return t.addStudent()}}},[t._v(" "+t._s(t.$t("add"))+" ")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"AlreadyExistsModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[this.stdExist?e("h5",{staticClass:"modal-title text-danger",attrs:{id:"ModalTitle1"}},[t._v(" "+t._s(t.$t("student-profile-already-exists"))+" ")]):e("h5",{staticClass:"modal-title text-danger",attrs:{id:"ModalTitle1"}},[t._v(" "+t._s(t.$t("unable-to-add-students"))+" ")]),t._m(3)]),e("div",{staticClass:"modal-body",attrs:{"data-widget":"dropzone"}},[e("div",{staticClass:"table-responsive border rounded p-10 mb-2"},[this.stdExist?e("table",{staticClass:"table table-striped"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("student-name")))]),e("th",[t._v(t._s(t.$t("parentsphone-number")))])])]),e("tbody",[e("tr",[e("td",[t._v(t._s(t.newStudent.name))]),e("td",[t._v(t._s(t.newStudent.phone))])])])]):e("div",[e("p",[t._v(" "+t._s(t.$t("class-size-has-reached-the-maximum-number-of-students"))+" ")]),e("p",[t._v("Quota is full, current number = 400, quota = 400")])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("ok"))+" ")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"CopyModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"ModalTitle1"}},[t._v(" "+t._s(t.$t("add-student"))+" ")]),t._m(4)]),e("div",{staticClass:"modal-body"},[e("h4",{staticClass:"text-center mb-4 mt-2"},[t._v(t._s(t.$t("copy")))]),e("p",[t._v(t._s(t.$t("copy-student-from-other-classes"))+".")]),e("form",[e("div",{staticClass:"form-group"},[e("select2",{attrs:{id:"s2_course",options:t.courseList},on:{select:function(s){return t.getStudentInfo(t.seleceCourse)}},model:{value:t.seleceCourse,callback:function(s){t.seleceCourse=s},expression:"seleceCourse"}})],1)]),t.courseStudentList.length>0?e("div",{staticClass:"table-responsive border rounded p-10 mb-2",staticStyle:{"max-height":"200px"},attrs:{"data-scroll":"dark"}},[e("table",{staticClass:"table table-striped"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("student-name")))]),e("th",[t._v(t._s(t.$t("parentsphone-number")))])])]),e("tbody",t._l(t.courseStudentList,(function(s){return e("tr",{key:s.username+s.star_uni_info},[e("td",[t._v(t._s(s.username))]),e("td",[t._v(t._s(s.star_uni_info))])])})),0)])]):t._e(),t.courseStudentList.length>0?e("p",{staticClass:"mb-0"},[e("span",{staticClass:"text-primary"},[t._v(t._s(t.courseStudentList.length))]),t._v(" "+t._s(t.$t("all-students"))+" ")]):t._e(),t.dupStudentList.length>0?e("div",{staticClass:"border border-danger rounded mt-4"},[e("p",{staticClass:"text-danger ml-3 mt-3 mb-0"},[t._v(" "+t._s(t.$t("these-students-already-exist-in-the-classes"))+". ")]),e("div",{staticClass:"table-responsive p-10 mb-2",staticStyle:{"max-height":"200px"},attrs:{"data-scroll":"dark"}},[e("table",{staticClass:"table table-striped"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("student-name")))])])]),e("tbody",t._l(t.dupStudentList,(function(s){return e("tr",{key:s.stuid},[e("td",[t._v(t._s(s.username))])])})),0)])])]):t._e()]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button"},on:{click:function(s){return t.copySList(t.seleceCourse)}}},[t._v(" "+t._s(t.$t("copy"))+" ")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"ImportCSVModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"ModalTitle1"}},[t._v(" "+t._s(t.$t("add-student"))+" ")]),t._m(5)]),e("div",{staticClass:"modal-body",attrs:{"data-widget":"dropzone"}},[e("h4",{staticClass:"text-center mb-4 mt-2"},[t._v(t._s(t.$t("import-csv")))]),e("p",{staticClass:"text-center mb-0"},[t._v(" "+t._s(t.$t("how-to-make-a-csv-file-to-import-students-list"))+"? ")]),e("p",{staticClass:"text-center",on:{click:function(s){return t.downloadSample()}}},[e("a",{staticClass:"download-text pointer"},[t._v(" "+t._s(t.$t("download-sample-file"))+" ")])]),e("vue-dropzone",{ref:"myVueDropzone",attrs:{id:"dropzone",options:t.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-complete":t.uploadComplete}},[e("i",{staticClass:"icon dripicons-cloud-upload"}),e("h6",{staticClass:"text-center"},[t._v(" "+t._s(t.$t("select-or-drag-and-drop-a-csv-file"))+". ")]),e("div",{staticClass:"d-block text-center"},[e("button",{staticClass:"btn btn-primary btn-rounded btn-floating",attrs:{type:"button"}},[t._v(" "+t._s(t.$t("upload"))+" ")])])]),t.showAlreadyExist?e("div",{staticClass:"border border-danger rounded mt-4"},[e("p",{staticClass:"text-danger ml-3 mt-3 mb-0"},[t._v(" "+t._s(t.$t("these-students-already-exist-in-the-course"))+". ")]),e("div",{staticClass:"table-responsive p-10 mb-2",staticStyle:{"max-height":"200px"},attrs:{"data-scroll":"dark"}},[e("table",{staticClass:"table table-striped"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("student-name")))]),e("th",[t._v(t._s(t.$t("parentsphone-number")))])])]),e("tbody",t._l(t.alreadyStudendList,(function(s){return e("tr",{key:s.phone},[e("td",[t._v(t._s(s.name))]),e("td",[t._v(t._s(s.phone))])])})),0)])])]):t._e(),t.showErrorMessage?e("p",{staticClass:"text-danger"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e()],1),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary btn-outline btn-rounded",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),e("button",{staticClass:"btn btn-primary btn-rounded",attrs:{type:"button","data-toggle":"modal"},on:{click:function(s){return t.importStdFile()}}},[t._v(" "+t._s(t.$t("import"))+" ")])])])])])])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("i",{staticClass:"zmdi zmdi-account-add zmdi-hc-fw display-5"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("i",{staticClass:"zmdi zmdi-accounts-list zmdi-hc-fw display-5"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"zmdi zmdi-close",attrs:{"aria-hidden":"true"}})])}],!1,null,null,null);s.default=u.exports}}]);
//# sourceMappingURL=chunk-3782eb35.ec1d8dd5.js.map